<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ANN â€” Personal Assistant</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=DM+Mono:ital,wght@0,300;0,400;0,500;1,300&family=Clash+Display:wght@400;500;600;700&family=Cabinet+Grotesk:wght@400;500;700;800&display=swap');
@import url('https://fonts.googleapis.com/css2?family=DM+Mono:wght@300;400;500&family=Manrope:wght@400;500;600;700;800&display=swap');

:root {
  --bg: #d4d6d9;
  --bg2: #c8cacd;
  --surface: #dcdee1;
  --surface2: #d6d8db;
  --border: #b8babe;
  --border2: #acacb0;
  --ink: #0d1117;
  --ink2: #1e2a3a;
  --ink3: #3d4a5c;
  --accent: #000000;
  --accent2: #1a1a2e;
  --accent-light: #dce3ed;
  --blue: #1a3260;
  --blue-light: #d0ddf5;
  --green: #166534;
  --green-light: #dcfce7;
  --amber: #92400e;
  --amber-light: #fef3c7;
  --red: #991b1b;
  --red-light: #fee2e2;
  --purple: #4c1d95;
  --purple-light: #ede9fe;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: var(--bg);
  color: var(--ink);
  font-family: 'Manrope', sans-serif;
  height: 100vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

body::after {
  content: '';
  position: fixed;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.03'/%3E%3C/svg%3E");
  pointer-events: none;
  z-index: 9999;
  opacity: 0.4;
}

.titlebar {
  background: #1e3560;
  height: 36px;
  display: flex;
  align-items: center;
  padding: 0 16px;
  gap: 8px;
  flex-shrink: 0;
  user-select: none;
}

.titlebar-dots { display: flex; gap: 6px; }

.dot {
  width: 12px; height: 12px;
  border-radius: 50%;
  cursor: pointer;
  transition: opacity 0.15s;
}
.dot:hover { opacity: 0.8; }
.dot-red { background: #ff5f57; }
.dot-yellow { background: #febc2e; }
.dot-green { background: #28c840; }

.titlebar-title {
  flex: 1; text-align: center;
  font-family: 'DM Mono', monospace;
  font-size: 11px; color: rgba(255,255,255,0.4); letter-spacing: 2px;
}

.titlebar-time {
  font-family: 'DM Mono', monospace;
  font-size: 11px; color: rgba(255,255,255,0.3);
}

.app { display: flex; flex: 1; overflow: hidden; }

.sidebar {
  width: 220px; background: #2c4a7c;
  display: flex; flex-direction: column;
  flex-shrink: 0; padding: 20px 0;
}

.sidebar-brand {
  padding: 0 20px 24px;
  border-bottom: 1px solid rgba(255,255,255,0.08);
}

.brand-name {
  font-family: 'Manrope', sans-serif;
  font-weight: 800; font-size: 20px;
  color: white; letter-spacing: -0.5px;
}

.brand-sub {
  font-family: 'DM Mono', monospace;
  font-size: 9px; color: rgba(255,255,255,0.3);
  letter-spacing: 2px; text-transform: uppercase; margin-top: 2px;
}

.sidebar-nav {
  padding: 16px 12px; flex: 1;
  display: flex; flex-direction: column; gap: 2px;
}

.nav-section-label {
  font-family: 'DM Mono', monospace;
  font-size: 9px; letter-spacing: 2px; text-transform: uppercase;
  color: rgba(255,255,255,0.2); padding: 8px 8px 4px; margin-top: 8px;
}

.nav-item {
  display: flex; align-items: center; gap: 10px;
  padding: 9px 10px; border-radius: 8px; cursor: pointer;
  transition: all 0.15s ease; color: rgba(255,255,255,0.5);
  font-size: 13px; font-weight: 500; position: relative;
}
.nav-item:hover { background: rgba(255,255,255,0.06); color: rgba(255,255,255,0.8); }
.nav-item.active { background: #000000; color: white; }

.nav-icon { font-size: 16px; width: 20px; text-align: center; flex-shrink: 0; }

.nav-badge {
  margin-left: auto; background: #2c4a7c; color: white;
  font-size: 9px; font-family: 'DM Mono', monospace;
  padding: 2px 6px; border-radius: 10px; min-width: 18px; text-align: center;
}
.nav-item.active .nav-badge { background: rgba(255,255,255,0.25); }

.sidebar-profile {
  padding: 16px 20px; border-top: 1px solid rgba(255,255,255,0.08);
  display: flex; align-items: center; gap: 10px; cursor: pointer;
}

.profile-avatar {
  width: 32px; height: 32px; border-radius: 50%;
  background: #2c4a7c; display: flex; align-items: center;
  justify-content: center; font-weight: 700; font-size: 13px;
  color: white; flex-shrink: 0;
}

.profile-name { font-size: 12px; font-weight: 600; color: rgba(255,255,255,0.8); }
.profile-role { font-size: 10px; font-family: 'DM Mono', monospace; color: rgba(255,255,255,0.3); }

.main { flex: 1; display: flex; flex-direction: column; overflow: hidden; }

.topbar {
  background: var(--surface); border-bottom: 1px solid var(--border);
  padding: 0 28px; height: 56px; display: flex; align-items: center;
  gap: 16px; flex-shrink: 0;
}

.topbar-title { font-weight: 700; font-size: 16px; color: var(--ink); }
.topbar-sub { font-size: 12px; font-family: 'DM Mono', monospace; color: var(--ink3); }
.topbar-actions { margin-left: auto; display: flex; align-items: center; gap: 10px; }

.btn {
  padding: 8px 16px; border-radius: 8px; font-size: 12px;
  font-weight: 600; font-family: 'Manrope', sans-serif;
  cursor: pointer; border: none; transition: all 0.15s ease;
}
.btn-primary { background: #000000; color: white; }
.btn-primary:hover { background: #1a1a2e; }
.btn-ghost { background: transparent; color: var(--ink2); border: 1px solid var(--border); }
.btn-ghost:hover { background: var(--bg2); }

.notif-bell {
  width: 36px; height: 36px; border-radius: 8px;
  border: 1px solid var(--border); display: flex; align-items: center;
  justify-content: center; cursor: pointer; position: relative;
  background: var(--surface); transition: all 0.15s;
}
.notif-bell:hover { background: var(--bg2); }

.notif-dot {
  position: absolute; top: 6px; right: 6px;
  width: 7px; height: 7px; border-radius: 50%;
  background: #2c4a7c; border: 1px solid var(--surface);
}

.content { flex: 1; overflow-y: auto; padding: 24px 28px; display: none; }
.content.active { display: block; }

.dashboard-grid {
  display: grid; grid-template-columns: 1fr 1fr 1fr;
  grid-template-rows: auto auto; gap: 16px;
}

.card { background: var(--surface); border: 1px solid var(--border); border-radius: 12px; overflow: hidden; }

.card-header {
  padding: 16px 18px 12px; display: flex; align-items: center;
  gap: 10px; border-bottom: 1px solid var(--border);
}

.card-icon {
  width: 28px; height: 28px; border-radius: 7px;
  display: flex; align-items: center; justify-content: center;
  font-size: 14px; flex-shrink: 0;
}

.card-title { font-weight: 700; font-size: 13px; color: var(--ink); }
.card-sub { font-size: 10px; font-family: 'DM Mono', monospace; color: var(--ink3); margin-top: 1px; }
.card-body { padding: 14px 18px; }

.whats-new { grid-column: 1 / -1; background: #2c4a7c; border-color: transparent; }
.whats-new .card-header { border-bottom-color: rgba(255,255,255,0.08); }
.whats-new .card-title { color: white; }
.whats-new .card-sub { color: rgba(255,255,255,0.35); }

.whats-new-body { padding: 16px 18px; display: flex; gap: 12px; align-items: flex-start; }

.profile-tags { display: flex; flex-wrap: wrap; gap: 6px; flex: 1; }

.profile-tag {
  padding: 5px 12px; border-radius: 20px;
  font-size: 11px; font-weight: 600; cursor: pointer; transition: all 0.15s;
}
.tag-active { background: #000000; color: white; }
.tag-inactive { background: rgba(255,255,255,0.08); color: rgba(255,255,255,0.5); border: 1px solid rgba(255,255,255,0.1); }
.tag-inactive:hover { background: rgba(255,255,255,0.12); color: rgba(255,255,255,0.7); }
.tag-add { background: transparent; color: rgba(255,255,255,0.3); border: 1px dashed rgba(255,255,255,0.15); }
.tag-add:hover { border-color: rgba(255,255,255,0.3); color: rgba(255,255,255,0.5); }

.task-item {
  display: flex; align-items: flex-start; gap: 10px;
  padding: 10px 0; border-bottom: 1px solid var(--border);
  cursor: pointer; transition: all 0.15s;
}
.task-item:last-child { border-bottom: none; }
.task-item:hover { opacity: 0.8; }

.task-check {
  width: 16px; height: 16px; border-radius: 4px;
  border: 1.5px solid var(--border2); flex-shrink: 0; margin-top: 1px;
  cursor: pointer; transition: all 0.15s;
  display: flex; align-items: center; justify-content: center;
}
.task-check.done { background: var(--green); border-color: var(--green); color: white; font-size: 10px; }

.task-text { flex: 1; font-size: 12px; color: var(--ink2); line-height: 1.4; }
.task-text.done { text-decoration: line-through; color: var(--ink3); }

.task-source {
  font-size: 9px; font-family: 'DM Mono', monospace;
  color: var(--ink3); background: var(--bg2);
  padding: 2px 6px; border-radius: 4px; white-space: nowrap;
}

.email-item {
  display: flex; gap: 10px; padding: 10px 0;
  border-bottom: 1px solid var(--border); cursor: pointer; transition: opacity 0.15s;
}
.email-item:last-child { border-bottom: none; }
.email-item:hover { opacity: 0.75; }

.email-avatar {
  width: 28px; height: 28px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-size: 11px; font-weight: 700; color: white; flex-shrink: 0;
}
.email-content { flex: 1; min-width: 0; }
.email-from { font-size: 11px; font-weight: 700; color: var(--ink); }
.email-subject { font-size: 11px; color: var(--ink2); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.email-summary { font-size: 10px; color: var(--ink3); font-family: 'DM Mono', monospace; margin-top: 2px; }
.email-time { font-size: 10px; font-family: 'DM Mono', monospace; color: var(--ink3); flex-shrink: 0; }

.budget-chart-wrap { display: flex; gap: 16px; align-items: center; }

.pie-wrap { position: relative; width: 90px; height: 90px; flex-shrink: 0; }
.pie-wrap svg { transform: rotate(-90deg); }

.pie-center {
  position: absolute; top: 50%; left: 50%;
  transform: translate(-50%, -50%); text-align: center;
}
.pie-total { font-size: 13px; font-weight: 800; color: var(--ink); line-height: 1; }
.pie-label { font-size: 8px; font-family: 'DM Mono', monospace; color: var(--ink3); text-transform: uppercase; }

.budget-legend { flex: 1; display: flex; flex-direction: column; gap: 6px; }

.budget-item { display: flex; align-items: center; gap: 8px; }
.budget-dot { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; }
.budget-cat { font-size: 11px; color: var(--ink2); flex: 1; }
.budget-amt { font-size: 11px; font-family: 'DM Mono', monospace; color: var(--ink); font-weight: 500; }
.budget-pct { font-size: 10px; font-family: 'DM Mono', monospace; color: var(--ink3); width: 30px; text-align: right; }

.inventory-item { display: flex; align-items: center; gap: 10px; padding: 7px 0; border-bottom: 1px solid var(--border); }
.inventory-item:last-child { border-bottom: none; }
.inv-emoji { font-size: 16px; width: 24px; text-align: center; }
.inv-name { font-size: 12px; font-weight: 600; color: var(--ink); flex: 1; }
.inv-qty { font-size: 11px; font-family: 'DM Mono', monospace; color: var(--ink2); }
.stock-bar { width: 50px; height: 4px; background: var(--border); border-radius: 2px; overflow: hidden; }
.stock-fill { height: 100%; border-radius: 2px; transition: width 0.5s ease; }

.parcel-item { display: flex; align-items: center; gap: 10px; padding: 9px 0; border-bottom: 1px solid var(--border); }
.parcel-item:last-child { border-bottom: none; }
.parcel-icon { width: 28px; height: 28px; border-radius: 7px; background: var(--bg2); display: flex; align-items: center; justify-content: center; font-size: 14px; flex-shrink: 0; }
.parcel-info { flex: 1; }
.parcel-name { font-size: 12px; font-weight: 600; color: var(--ink); }
.parcel-courier { font-size: 10px; font-family: 'DM Mono', monospace; color: var(--ink3); }

.status-pill { font-size: 9px; font-family: 'DM Mono', monospace; font-weight: 500; padding: 3px 8px; border-radius: 10px; text-transform: uppercase; letter-spacing: 0.5px; }
.status-transit { background: var(--amber-light); color: var(--amber); }
.status-delivered { background: var(--green-light); color: var(--green); }
.status-processing { background: var(--blue-light); color: var(--blue); }
.status-alert { background: var(--red-light); color: var(--red); }

.notif-panel {
  position: fixed; top: 92px; right: 28px; width: 320px;
  background: var(--surface); border: 1px solid var(--border);
  border-radius: 12px; box-shadow: 0 20px 60px rgba(0,0,0,0.12);
  z-index: 100; display: none; overflow: hidden;
}
.notif-panel.open { display: block; animation: slideDown 0.2s ease; }

@keyframes slideDown {
  from { opacity: 0; transform: translateY(-8px); }
  to { opacity: 1; transform: translateY(0); }
}

.notif-header { padding: 14px 16px; border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; }
.notif-title { font-size: 13px; font-weight: 700; }
.notif-clear { font-size: 11px; color: #2c4a7c; cursor: pointer; font-family: 'DM Mono', monospace; }
.notif-list { max-height: 320px; overflow-y: auto; }
.notif-item { padding: 12px 16px; border-bottom: 1px solid var(--border); display: flex; gap: 10px; cursor: pointer; transition: background 0.15s; }
.notif-item:last-child { border-bottom: none; }
.notif-item:hover { background: var(--bg2); }
.notif-ico { font-size: 18px; flex-shrink: 0; }
.notif-body { flex: 1; }
.notif-msg { font-size: 12px; color: var(--ink); line-height: 1.4; }
.notif-time { font-size: 10px; font-family: 'DM Mono', monospace; color: var(--ink3); margin-top: 2px; }

.calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 4px; }
.cal-day-label { text-align: center; font-size: 9px; font-family: 'DM Mono', monospace; color: var(--ink3); text-transform: uppercase; letter-spacing: 1px; padding: 4px 0; }
.cal-day { aspect-ratio: 1; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 500; color: var(--ink2); cursor: pointer; transition: all 0.15s; position: relative; }
.cal-day:hover { background: var(--bg2); }
.cal-day.today { background: #000000; color: white; font-weight: 700; }
.cal-day.has-event::after { content: ''; position: absolute; bottom: 3px; left: 50%; transform: translateX(-50%); width: 4px; height: 4px; border-radius: 50%; background: #2c4a7c; }
.cal-day.today.has-event::after { background: white; }
.cal-day.other-month { color: var(--border2); }

.event-item { display: flex; gap: 12px; padding: 10px 0; border-bottom: 1px solid var(--border); align-items: flex-start; }
.event-item:last-child { border-bottom: none; }
.event-time-col { width: 50px; flex-shrink: 0; }
.event-time { font-size: 11px; font-family: 'DM Mono', monospace; color: var(--ink3); }
.event-bar { width: 3px; border-radius: 2px; margin-top: 4px; height: 30px; }
.event-info { flex: 1; }
.event-name { font-size: 12px; font-weight: 600; color: var(--ink); }
.event-detail { font-size: 10px; font-family: 'DM Mono', monospace; color: var(--ink3); margin-top: 2px; }

.bill-item { display: flex; align-items: center; gap: 10px; padding: 9px 0; border-bottom: 1px solid var(--border); }
.bill-item:last-child { border-bottom: none; }
.bill-icon { width: 28px; height: 28px; border-radius: 7px; display: flex; align-items: center; justify-content: center; font-size: 14px; flex-shrink: 0; }
.bill-info { flex: 1; }
.bill-name { font-size: 12px; font-weight: 600; color: var(--ink); }
.bill-freq { font-size: 10px; font-family: 'DM Mono', monospace; color: var(--ink3); }
.bill-amount { font-size: 13px; font-family: 'DM Mono', monospace; font-weight: 500; color: var(--ink); }
.price-change { font-size: 9px; color: var(--red); display: flex; align-items: center; gap: 2px; }

.stat-row { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 16px; }
.stat-card { background: var(--surface); border: 1px solid var(--border); border-radius: 10px; padding: 14px 16px; }
.stat-value { font-size: 22px; font-weight: 800; color: var(--ink); line-height: 1; }
.stat-label { font-size: 10px; font-family: 'DM Mono', monospace; color: var(--ink3); text-transform: uppercase; letter-spacing: 1px; margin-top: 4px; }
.stat-change { font-size: 10px; font-family: 'DM Mono', monospace; margin-top: 6px; }
.change-up { color: var(--green); }
.change-down { color: var(--red); }

.wallet-card { background: linear-gradient(135deg, #1a1714 0%, #2d2520 100%); border-radius: 12px; padding: 20px; margin-bottom: 12px; position: relative; overflow: hidden; cursor: pointer; transition: transform 0.2s ease; }
.wallet-card:hover { transform: translateY(-2px); }
.wallet-card::before { content: ''; position: absolute; top: -30px; right: -30px; width: 120px; height: 120px; border-radius: 50%; background: rgba(200, 82, 26, 0.15); }
.wallet-type { font-size: 9px; font-family: 'DM Mono', monospace; letter-spacing: 2px; text-transform: uppercase; color: rgba(255,255,255,0.4); margin-bottom: 12px; }
.wallet-event { font-size: 16px; font-weight: 700; color: white; margin-bottom: 4px; }
.wallet-detail { font-size: 11px; font-family: 'DM Mono', monospace; color: rgba(255,255,255,0.4); }
.wallet-barcode { margin-top: 14px; height: 36px; background: repeating-linear-gradient(90deg, rgba(255,255,255,0.8) 0px, rgba(255,255,255,0.8) 2px, transparent 2px, transparent 5px); border-radius: 3px; opacity: 0.6; }

.trip-card { background: var(--surface); border: 1px solid var(--border); border-radius: 10px; overflow: hidden; margin-bottom: 10px; cursor: pointer; transition: all 0.2s ease; }
.trip-card:hover { border-color: #2c4a7c; box-shadow: 0 4px 16px rgba(44,74,124,0.15); }
.trip-img { height: 80px; background: linear-gradient(135deg, var(--bg2) 0%, var(--border) 100%); display: flex; align-items: center; justify-content: center; font-size: 32px; }
.trip-info { padding: 10px 12px; }
.trip-name { font-size: 13px; font-weight: 700; color: var(--ink); }
.trip-dates { font-size: 10px; font-family: 'DM Mono', monospace; color: var(--ink3); margin-top: 2px; }

.meal-card { background: var(--surface2); border: 1px solid var(--border); border-radius: 8px; padding: 12px; margin-bottom: 8px; display: flex; gap: 10px; align-items: center; }
.meal-emoji { font-size: 24px; }
.meal-info { flex: 1; }
.meal-name { font-size: 12px; font-weight: 700; color: var(--ink); }
.meal-macros { font-size: 10px; font-family: 'DM Mono', monospace; color: var(--ink3); margin-top: 2px; }
.meal-day { font-size: 10px; font-family: 'DM Mono', monospace; color: var(--ink3); }

.call-item { display: flex; align-items: flex-start; gap: 10px; padding: 10px 0; border-bottom: 1px solid var(--border); }
.call-item:last-child { border-bottom: none; }
.call-avatar { width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: 700; color: white; flex-shrink: 0; }
.call-info { flex: 1; }
.call-name { font-size: 12px; font-weight: 600; color: var(--ink); }
.call-summary { font-size: 10px; font-family: 'DM Mono', monospace; color: var(--ink3); margin-top: 2px; line-height: 1.4; }
.call-meta { text-align: right; }
.call-time { font-size: 10px; font-family: 'DM Mono', monospace; color: var(--ink3); }
.call-duration { font-size: 10px; font-family: 'DM Mono', monospace; color: var(--ink3); }

::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border2); border-radius: 2px; }

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}
.content.active { animation: fadeIn 0.25s ease both; }

.toast {
  position: fixed; bottom: 24px; right: 24px;
  background: #1e3560; color: white; padding: 12px 18px;
  border-radius: 10px; font-size: 12px; font-family: 'DM Mono', monospace;
  display: flex; align-items: center; gap: 8px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.2); z-index: 1000;
  transform: translateY(80px); opacity: 0;
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}
.toast.show { transform: translateY(0); opacity: 1; }

.add-task-row { display: flex; gap: 8px; margin-bottom: 12px; }

.task-input {
  flex: 1; padding: 8px 12px; border: 1px solid var(--border);
  border-radius: 7px; font-size: 12px; font-family: 'Manrope', sans-serif;
  background: var(--surface); color: var(--ink); outline: none; transition: border-color 0.15s;
}
.task-input:focus { border-color: #2c4a7c; }
.task-input::placeholder { color: var(--ink3); }

/* â”€â”€ TRANSACTIONS â”€â”€ */
.tx-item {
  display: flex; align-items: center; gap: 12px;
  padding: 11px 0; border-bottom: 1px solid var(--border);
  cursor: pointer; transition: background 0.15s;
  border-radius: 4px;
}
.tx-item:last-child { border-bottom: none; }
.tx-item:hover { background: var(--bg2); margin: 0 -6px; padding: 11px 6px; }

.tx-logo {
  width: 32px; height: 32px; border-radius: 8px;
  display: flex; align-items: center; justify-content: center;
  font-size: 13px; font-weight: 800; flex-shrink: 0;
  letter-spacing: -0.5px;
}

.tx-info { flex: 1; min-width: 0; }

.tx-merchant {
  font-size: 12px; font-weight: 700; color: var(--ink);
  display: flex; align-items: center; gap: 6px;
}

.tx-meta { font-size: 10px; font-family: 'DM Mono', monospace; color: var(--ink3); margin-top: 2px; }

.tx-right { text-align: right; flex-shrink: 0; }

.tx-amount {
  font-size: 13px; font-family: 'DM Mono', monospace;
  font-weight: 600; color: var(--ink);
}
.tx-amount.credit { color: var(--green); }
.tx-amount.debit { color: var(--ink); }

.tx-date { font-size: 10px; font-family: 'DM Mono', monospace; color: var(--ink3); margin-top: 2px; }

/* Receipt badge on transaction */
.receipt-badge {
  display: inline-flex; align-items: center; gap: 3px;
  font-size: 9px; font-family: 'DM Mono', monospace;
  background: #dcfce7; color: #166534;
  border: 1px solid rgba(22,101,52,0.2);
  padding: 2px 7px; border-radius: 4px;
  letter-spacing: 0.5px; text-transform: uppercase;
  cursor: pointer; transition: all 0.15s;
}
.receipt-badge:hover { background: #bbf7d0; }

.cat-pill {
  font-size: 9px; font-family: 'DM Mono', monospace;
  padding: 2px 7px; border-radius: 4px;
  text-transform: uppercase; letter-spacing: 0.5px;
}
.cat-food { background: #fef3c7; color: #92400e; }
.cat-transport { background: var(--blue-light); color: var(--blue); }
.cat-shopping { background: var(--purple-light); color: var(--purple); }
.cat-subs { background: #fdf4ff; color: #7e22ce; }
.cat-housing { background: #f0f9ff; color: #0369a1; }

/* Receipt modal overlay */
.modal-overlay {
  position: fixed; inset: 0; background: rgba(26,23,20,0.6);
  z-index: 200; display: none; align-items: center; justify-content: center;
  backdrop-filter: blur(4px);
}
.modal-overlay.open { display: flex; animation: fadeIn 0.2s ease; }

.receipt-modal {
  background: var(--surface); border-radius: 14px;
  width: 340px; max-height: 80vh; overflow-y: auto;
  box-shadow: 0 32px 80px rgba(0,0,0,0.25);
  border: 1px solid var(--border);
}

.receipt-modal-header {
  padding: 18px 20px 14px;
  border-bottom: 1px solid var(--border);
  display: flex; align-items: center; gap: 12px;
}

.receipt-modal-close {
  margin-left: auto; width: 24px; height: 24px;
  border-radius: 50%; background: var(--bg2);
  display: flex; align-items: center; justify-content: center;
  cursor: pointer; font-size: 12px; color: var(--ink3);
  transition: all 0.15s; border: none;
}
.receipt-modal-close:hover { background: var(--border); color: var(--ink); }

.receipt-body { padding: 16px 20px; }

/* Tesco-style receipt */
.receipt-paper {
  background: #fffef9;
  border: 1px solid #e8e4dc;
  border-radius: 6px;
  padding: 16px;
  font-family: 'DM Mono', monospace;
  font-size: 11px;
  color: #2a2420;
}

.receipt-paper-header {
  text-align: center;
  border-bottom: 1px dashed #ccc;
  padding-bottom: 10px;
  margin-bottom: 10px;
}

.receipt-store-name {
  font-size: 16px;
  font-weight: 700;
  letter-spacing: 3px;
  text-transform: uppercase;
  color: #00539f;
}

.receipt-store-sub {
  font-size: 9px;
  color: #888;
  margin-top: 2px;
  letter-spacing: 1px;
}

.receipt-line {
  display: flex;
  justify-content: space-between;
  padding: 3px 0;
  border-bottom: 1px solid #f0ede8;
  gap: 8px;
}
.receipt-line:last-child { border-bottom: none; }

.receipt-line-name { flex: 1; }
.receipt-line-qty { color: #888; width: 24px; text-align: center; flex-shrink: 0; }
.receipt-line-price { font-weight: 600; flex-shrink: 0; text-align: right; }

.receipt-divider {
  border: none;
  border-top: 1px dashed #ccc;
  margin: 8px 0;
}

.receipt-total-row {
  display: flex;
  justify-content: space-between;
  padding: 4px 0;
  font-size: 12px;
}

.receipt-total-row.grand {
  font-size: 14px;
  font-weight: 700;
  border-top: 2px solid #2a2420;
  margin-top: 4px;
  padding-top: 6px;
}

.receipt-footer {
  text-align: center;
  margin-top: 10px;
  padding-top: 8px;
  border-top: 1px dashed #ccc;
  font-size: 9px;
  color: #aaa;
  line-height: 1.6;
}

.receipt-barcode-img {
  margin: 8px auto 0;
  height: 28px;
  background: repeating-linear-gradient(
    90deg,
    #333 0px, #333 1.5px,
    transparent 1.5px, transparent 4px
  );
  border-radius: 2px;
  opacity: 0.6;
  width: 160px;
}

/* Tesco logo colours */
.tesco-logo {
  background: #00539f;
  color: white;
  font-family: 'Manrope', sans-serif;
  font-size: 11px;
  font-weight: 800;
  letter-spacing: 1px;
}

.tesco-logo {
  background: #00539f;
  color: white;
  font-family: 'Manrope', sans-serif;
  font-size: 11px;
  font-weight: 800;
  letter-spacing: 1px;
}

/* â”€â”€ TRIP PLANNER MODAL â”€â”€ */
.trip-modal-overlay {
  position: fixed; inset: 0;
  background: rgba(13,17,23,0.7);
  z-index: 250;
  display: none;
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(6px);
}
.trip-modal-overlay.open { display: flex; animation: fadeIn 0.2s ease; }

.trip-modal {
  background: var(--surface);
  border-radius: 16px;
  width: min(780px, calc(100vw - 24px));
  max-height: 88vh;
  overflow-y: auto;
  box-shadow: 0 40px 100px rgba(0,0,0,0.3);
  border: 1px solid var(--border);
  display: flex;
  flex-direction: column;
}

.trip-modal-hero {
  height: 140px;
  background: linear-gradient(135deg, #1e3560 0%, #2c4a7c 50%, #3a6099 100%);
  position: relative;
  overflow: hidden;
  flex-shrink: 0;
  border-radius: 16px 16px 0 0;
  display: flex;
  align-items: flex-end;
  padding: 20px 24px;
}

.trip-modal-hero::before {
  content: 'ğŸ—½';
  position: absolute;
  top: -10px; right: 20px;
  font-size: 100px;
  opacity: 0.18;
  transform: rotate(-5deg);
}

.trip-modal-hero-text { position: relative; z-index: 1; }

.trip-modal-hero h2 {
  font-size: 22px;
  font-weight: 800;
  color: white;
  letter-spacing: -0.5px;
  line-height: 1.1;
}

.trip-modal-hero p {
  font-size: 11px;
  font-family: 'DM Mono', monospace;
  color: rgba(255,255,255,0.5);
  margin-top: 4px;
  letter-spacing: 1px;
}

.trip-modal-close-btn {
  position: absolute;
  top: 14px; right: 16px;
  width: 28px; height: 28px;
  border-radius: 50%;
  background: rgba(255,255,255,0.15);
  border: none;
  color: white;
  font-size: 13px;
  cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  z-index: 2;
  transition: background 0.15s;
}
.trip-modal-close-btn:hover { background: rgba(255,255,255,0.25); }

/* Step indicator */
.trip-steps {
  display: flex;
  align-items: center;
  padding: 16px 24px;
  border-bottom: 1px solid var(--border);
  gap: 0;
  flex-shrink: 0;
}

.trip-step {
  display: flex;
  align-items: center;
  gap: 8px;
  flex: 1;
}

.trip-step-dot {
  width: 24px; height: 24px;
  border-radius: 50%;
  background: var(--border);
  display: flex; align-items: center; justify-content: center;
  font-size: 10px;
  font-family: 'DM Mono', monospace;
  font-weight: 700;
  color: var(--ink3);
  flex-shrink: 0;
  transition: all 0.25s;
}

.trip-step-dot.active {
  background: #2c4a7c;
  color: white;
}

.trip-step-dot.done {
  background: #166534;
  color: white;
}

.trip-step-label {
  font-size: 10px;
  font-family: 'DM Mono', monospace;
  color: var(--ink3);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  transition: color 0.25s;
}

.trip-step-label.active { color: #2c4a7c; font-weight: 700; }
.trip-step-label.done { color: #166534; }

.trip-step-line {
  flex: 1;
  height: 1px;
  background: var(--border);
  margin: 0 8px;
}

.trip-step-line.done { background: #166534; }

/* Step panels */
.trip-panel { display: none; padding: 20px 24px; flex: 1; }
.trip-panel.active { display: block; }

/* Date grid */
.date-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  margin-bottom: 16px;
}

.date-field label {
  display: block;
  font-size: 10px;
  font-family: 'DM Mono', monospace;
  color: var(--ink3);
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 6px;
}

.date-field input,
.date-field select {
  width: 100%;
  padding: 9px 12px;
  border: 1px solid var(--border);
  border-radius: 8px;
  font-size: 13px;
  font-family: 'Manrope', sans-serif;
  background: var(--surface);
  color: var(--ink);
  outline: none;
  transition: border-color 0.15s;
}

.date-field input:focus,
.date-field select:focus { border-color: #2c4a7c; }

/* Preference chips */
.pref-chips {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 16px;
}

.pref-chip {
  padding: 7px 14px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  border: 1.5px solid var(--border);
  background: var(--surface);
  color: var(--ink2);
  transition: all 0.15s;
  user-select: none;
}

.pref-chip.selected {
  background: #2c4a7c;
  border-color: #2c4a7c;
  color: white;
}

/* Flight cards */
.flight-option {
  border: 1.5px solid var(--border);
  border-radius: 10px;
  padding: 14px 16px;
  margin-bottom: 10px;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  gap: 16px;
}
.flight-option:hover { border-color: #2c4a7c; background: var(--surface2); }
.flight-option.selected { border-color: #2c4a7c; background: var(--blue-light); }

.flight-airline {
  font-size: 10px;
  font-family: 'DM Mono', monospace;
  color: var(--ink3);
  text-transform: uppercase;
  letter-spacing: 1px;
}

.flight-times {
  display: flex;
  align-items: center;
  gap: 10px;
  flex: 1;
}

.flight-time {
  font-size: 18px;
  font-weight: 800;
  color: var(--ink);
  font-family: 'DM Mono', monospace;
}

.flight-route-line {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
}

.flight-duration {
  font-size: 9px;
  font-family: 'DM Mono', monospace;
  color: var(--ink3);
}

.flight-line {
  width: 100%;
  height: 1px;
  background: var(--border2);
  position: relative;
}

.flight-line::after {
  content: 'âœˆ';
  position: absolute;
  right: -4px;
  top: -7px;
  font-size: 12px;
}

.flight-price {
  font-size: 16px;
  font-weight: 800;
  font-family: 'DM Mono', monospace;
  color: var(--ink);
  text-align: right;
}

.flight-price-sub {
  font-size: 9px;
  font-family: 'DM Mono', monospace;
  color: var(--ink3);
  text-align: right;
}

/* Hotel cards */
.hotel-option {
  border: 1.5px solid var(--border);
  border-radius: 10px;
  padding: 14px 16px;
  margin-bottom: 10px;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  gap: 14px;
  align-items: flex-start;
}
.hotel-option:hover { border-color: #2c4a7c; background: var(--surface2); }
.hotel-option.selected { border-color: #2c4a7c; background: var(--blue-light); }

.hotel-img {
  width: 56px; height: 56px;
  border-radius: 8px;
  background: linear-gradient(135deg, var(--bg2), var(--border));
  display: flex; align-items: center; justify-content: center;
  font-size: 26px;
  flex-shrink: 0;
}

.hotel-info { flex: 1; }
.hotel-name { font-size: 13px; font-weight: 700; color: var(--ink); }
.hotel-location { font-size: 10px; font-family: 'DM Mono', monospace; color: var(--ink3); margin-top: 2px; }
.hotel-stars { font-size: 11px; color: #f59e0b; margin-top: 3px; }
.hotel-price { font-size: 14px; font-weight: 800; font-family: 'DM Mono', monospace; color: var(--ink); text-align: right; }
.hotel-price-sub { font-size: 9px; font-family: 'DM Mono', monospace; color: var(--ink3); text-align: right; }

/* Itinerary day */
.itin-day {
  margin-bottom: 18px;
}

.itin-day-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 10px;
}

.itin-day-num {
  width: 28px; height: 28px;
  border-radius: 50%;
  background: #2c4a7c;
  color: white;
  font-size: 11px;
  font-family: 'DM Mono', monospace;
  font-weight: 700;
  display: flex; align-items: center; justify-content: center;
  flex-shrink: 0;
}

.itin-day-title { font-size: 13px; font-weight: 700; color: var(--ink); }
.itin-day-sub { font-size: 10px; font-family: 'DM Mono', monospace; color: var(--ink3); }

.itin-item {
  display: flex;
  gap: 12px;
  padding: 8px 0;
  border-bottom: 1px solid var(--border);
  align-items: flex-start;
}
.itin-item:last-child { border-bottom: none; }

.itin-time {
  width: 48px;
  font-size: 10px;
  font-family: 'DM Mono', monospace;
  color: var(--ink3);
  flex-shrink: 0;
  padding-top: 2px;
}

.itin-dot {
  width: 8px; height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
  margin-top: 4px;
}

.itin-info { flex: 1; }
.itin-name { font-size: 12px; font-weight: 600; color: var(--ink); }
.itin-detail { font-size: 10px; font-family: 'DM Mono', monospace; color: var(--ink3); margin-top: 1px; }
.itin-tag {
  font-size: 9px; font-family: 'DM Mono', monospace;
  padding: 1px 6px; border-radius: 3px;
  text-transform: uppercase; display: inline-block; margin-top: 3px;
}
.itin-tag-food { background: #fef3c7; color: #92400e; }
.itin-tag-culture { background: var(--purple-light); color: #4c1d95; }
.itin-tag-transit { background: var(--blue-light); color: #1a3260; }
.itin-tag-hotel { background: var(--green-light); color: #166534; }

/* Summary box */
.trip-summary-box {
  background: #1e3560;
  border-radius: 10px;
  padding: 16px 18px;
  margin-bottom: 16px;
  color: white;
}

.trip-summary-grid {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr 1fr;
  gap: 12px;
  margin-top: 10px;
}

.trip-summary-item { }
.trip-summary-label { font-size: 9px; font-family: 'DM Mono', monospace; color: rgba(255,255,255,0.4); text-transform: uppercase; letter-spacing: 1px; }
.trip-summary-val { font-size: 14px; font-weight: 700; color: white; margin-top: 3px; }

/* Modal footer */
.trip-modal-footer {
  padding: 14px 24px;
  border-top: 1px solid var(--border);
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-shrink: 0;
  background: var(--surface2);
  border-radius: 0 0 16px 16px;
}

/* AI thinking animation */
.ai-thinking {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 20px;
  justify-content: center;
  flex-direction: column;
}

.ai-dots {
  display: flex; gap: 6px;
}

.ai-dot {
  width: 8px; height: 8px;
  border-radius: 50%;
  background: #2c4a7c;
  animation: aiPulse 1.2s infinite ease-in-out;
}

.ai-dot:nth-child(2) { animation-delay: 0.2s; }
.ai-dot:nth-child(3) { animation-delay: 0.4s; }

@keyframes aiPulse {
  0%, 80%, 100% { transform: scale(0.6); opacity: 0.4; }
  40% { transform: scale(1); opacity: 1; }
}

@media (max-width: 768px) {
  .trip-modal-hero { height: 110px; }
  .trip-modal-hero h2 { font-size: 18px; }
  .trip-steps { padding: 12px 14px; gap: 0; }
  .trip-step-label { display: none; }
  .trip-panel { padding: 14px 16px; }
  .date-grid { grid-template-columns: 1fr; }
  .flight-time { font-size: 15px; }
  .trip-summary-grid { grid-template-columns: 1fr 1fr; }
  .trip-modal-footer { padding: 10px 16px; }
}

/* â”€â”€ MOBILE BOTTOM NAV â”€â”€ */
.mobile-nav {
  display: none;
  position: fixed;
  bottom: 0; left: 0; right: 0;
  background: #2c4a7c;
  height: 60px;
  z-index: 300;
  border-top: 1px solid rgba(255,255,255,0.1);
  padding: 0 4px;
}

.mobile-nav-inner {
  display: flex;
  height: 100%;
  align-items: center;
  justify-content: space-around;
}

.mobile-nav-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 3px;
  padding: 6px 10px;
  border-radius: 10px;
  cursor: pointer;
  color: rgba(255,255,255,0.5);
  font-size: 9px;
  font-family: 'DM Mono', monospace;
  letter-spacing: 0.5px;
  transition: all 0.15s;
  min-width: 52px;
  position: relative;
}

.mobile-nav-btn.active {
  color: white;
  background: rgba(255,255,255,0.12);
}

.mobile-nav-icon { font-size: 18px; line-height: 1; }

.mobile-nav-badge {
  position: absolute;
  top: 2px; right: 6px;
  background: #ef4444;
  color: white;
  font-size: 8px;
  font-family: 'DM Mono', monospace;
  width: 14px; height: 14px;
  border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
}

/* Mobile drawer for full nav */
.mobile-drawer-overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.5);
  z-index: 400;
  backdrop-filter: blur(4px);
}

.mobile-drawer-overlay.open { display: block; }

.mobile-drawer {
  position: fixed;
  top: 0; left: 0; bottom: 0;
  width: 260px;
  background: #2c4a7c;
  z-index: 500;
  transform: translateX(-100%);
  transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1);
  display: flex;
  flex-direction: column;
  padding: 20px 0;
  overflow-y: auto;
}

.mobile-drawer.open {
  transform: translateX(0);
}

.mobile-drawer .sidebar-brand {
  padding: 0 20px 20px;
  border-bottom: 1px solid rgba(255,255,255,0.1);
  margin-bottom: 8px;
}

.mobile-drawer .sidebar-nav {
  padding: 8px 12px;
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.mobile-drawer .nav-item { font-size: 14px; padding: 11px 12px; }

.mobile-drawer .sidebar-profile {
  padding: 14px 20px;
  border-top: 1px solid rgba(255,255,255,0.1);
}

/* â”€â”€ RESPONSIVE BREAKPOINTS â”€â”€ */
@media (max-width: 768px) {

  body { overflow: hidden; }

  /* Hide desktop sidebar and titlebar dots */
  .sidebar { display: none; }
  .titlebar-dots { display: none; }

  /* Titlebar becomes mobile header */
  .titlebar {
    height: 48px;
    padding: 0 16px;
    justify-content: space-between;
  }

  .titlebar-title {
    font-size: 13px;
    letter-spacing: 1.5px;
    color: rgba(255,255,255,0.7);
    flex: unset;
    text-align: left;
  }

  .titlebar-time {
    font-size: 12px;
    color: rgba(255,255,255,0.5);
  }

  /* Show hamburger menu button */
  .mobile-menu-btn {
    display: flex !important;
    align-items: center;
    justify-content: center;
    width: 32px; height: 32px;
    border-radius: 8px;
    background: rgba(255,255,255,0.1);
    color: white;
    font-size: 16px;
    cursor: pointer;
    border: none;
  }

  /* Main area fills screen */
  .main { width: 100%; }

  /* Topbar compact */
  .topbar {
    height: 50px;
    padding: 0 16px;
    gap: 8px;
  }

  .topbar-title { font-size: 14px; }
  .topbar-sub { display: none; }

  .topbar-actions { gap: 6px; }

  /* Hide Sync button on mobile */
  .topbar-actions .btn-ghost:first-child { display: none; }

  .btn { padding: 7px 12px; font-size: 11px; }

  /* Content padding */
  .content { padding: 14px 12px 80px; }

  /* Dashboard grid â†’ single column */
  .dashboard-grid {
    grid-template-columns: 1fr !important;
    gap: 12px;
  }

  /* Stat row â†’ 2 columns */
  .stat-row {
    grid-template-columns: 1fr 1fr !important;
    gap: 8px;
    margin-bottom: 12px;
  }

  .stat-card { padding: 10px 12px; }
  .stat-value { font-size: 18px; }
  .stat-label { font-size: 9px; }
  .stat-change { font-size: 9px; }

  /* Cards */
  .card { border-radius: 10px; }
  .card-header { padding: 12px 14px 10px; gap: 8px; }
  .card-title { font-size: 12px; }
  .card-sub { font-size: 9px; }
  .card-body { padding: 10px 14px; }

  /* Whats new card */
  .whats-new-body { padding: 10px 14px; }
  .profile-tag { font-size: 10px; padding: 4px 10px; }

  /* Budget chart wraps vertically on small screens */
  .budget-chart-wrap { flex-direction: column; align-items: flex-start; gap: 12px; }
  .pie-wrap { margin: 0 auto; }

  /* Task items */
  .task-text { font-size: 11px; }
  .task-source { font-size: 8px; }

  /* Email items */
  .email-from { font-size: 11px; }
  .email-subject { font-size: 10px; }
  .email-summary { font-size: 9px; }

  /* Inventory */
  .inv-name { font-size: 11px; }
  .inv-qty { font-size: 10px; }

  /* Bill items */
  .bill-name { font-size: 11px; }
  .bill-freq { font-size: 9px; }
  .bill-amount { font-size: 12px; }

  /* Parcel items */
  .parcel-name { font-size: 11px; }
  .parcel-courier { font-size: 9px; }
  .status-pill { font-size: 8px; padding: 2px 6px; }

  /* Transaction items */
  .tx-merchant { font-size: 11px; }
  .tx-meta { font-size: 9px; }
  .tx-amount { font-size: 12px; }
  .cat-pill { font-size: 8px; padding: 1px 5px; }

  /* Wallet cards */
  .wallet-card { padding: 16px; }
  .wallet-event { font-size: 14px; }

  /* Trip cards grid â†’ 1 col */
  .dashboard-grid > .card,
  [style*="grid-template-columns:1fr 1fr 1fr"] {
    grid-template-columns: 1fr !important;
  }

  /* Multi-col layouts â†’ single col */
  [style*="grid-template-columns:1fr 1.6fr"],
  [style*="grid-template-columns:1fr 1.4fr"],
  [style*="grid-template-columns:1.2fr 1fr"],
  [style*="grid-template-columns:1.3fr 1fr"],
  [style*="grid-template-columns:1fr 1fr"] {
    grid-template-columns: 1fr !important;
  }

  /* Notification panel */
  .notif-panel {
    top: 98px;
    right: 12px;
    left: 12px;
    width: auto;
  }

  /* Receipt modal full width on mobile */
  .receipt-modal { width: calc(100vw - 32px); max-height: 85vh; }

  /* Mobile nav visible */
  .mobile-nav { display: flex; }

  /* Calendar grid text */
  .cal-day { font-size: 11px; }
  .cal-day-label { font-size: 8px; }

  /* Event items */
  .event-name { font-size: 11px; }
  .event-detail { font-size: 9px; }

  /* Call items */
  .call-name { font-size: 11px; }
  .call-summary { font-size: 9px; }

  /* Meal cards */
  .meal-name { font-size: 11px; }
  .meal-macros { font-size: 9px; }

  /* VAT/Tax tables */
  table { font-size: 11px !important; }

  /* Buttons in headers */
  .card-header .btn { font-size: 10px; padding: 5px 10px; }

  /* Add task row */
  .add-task-row { gap: 6px; }
  .task-input { font-size: 11px; padding: 7px 10px; }

  /* Hide topbar sub text */
  #topbar-sub { display: none; }
}

@media (max-width: 400px) {
  .stat-row { grid-template-columns: 1fr 1fr !important; }
  .stat-value { font-size: 16px; }
  .content { padding: 10px 10px 80px; }
  .card-header { padding: 10px 12px 8px; }
  .card-body { padding: 8px 12px; }
  .topbar { height: 46px; padding: 0 12px; }
  .topbar-title { font-size: 13px; }
  .profile-tag { font-size: 9px; padding: 3px 8px; }
  .mobile-nav-btn { min-width: 44px; font-size: 8px; }
  .mobile-nav-icon { font-size: 16px; }
}
</style>
</head>
<body>

<div class="titlebar">
  <button class="mobile-menu-btn" style="display:none;" onclick="toggleDrawer()" id="mobile-menu-btn">â˜°</button>
  <div class="titlebar-dots">
    <div class="dot dot-red"></div>
    <div class="dot dot-yellow"></div>
    <div class="dot dot-green"></div>
  </div>
  <div class="titlebar-title">ANN â€” Personal Assistant</div>
  <div class="titlebar-time" id="clock">--:--</div>
</div>

<div class="app">
  <div class="sidebar">
    <div class="sidebar-brand">
      <div class="brand-name">ANN</div>
      <div class="brand-sub">Personal Assistant</div>
    </div>
    <div class="sidebar-nav">
      <div class="nav-section-label">Overview</div>
      <div class="nav-item active" onclick="navigate('dashboard', this)"><span class="nav-icon">âŠ</span> Dashboard</div>
      <div class="nav-item" onclick="navigate('calendar', this)"><span class="nav-icon">â—«</span> Calendar<span class="nav-badge">3</span></div>
      <div class="nav-item" onclick="navigate('tasks', this)"><span class="nav-icon">âœ“</span> Tasks<span class="nav-badge">5</span></div>
      <div class="nav-section-label">Communications</div>
      <div class="nav-item" onclick="navigate('emails', this)"><span class="nav-icon">âœ‰</span> Emails<span class="nav-badge">4</span></div>
      <div class="nav-item" onclick="navigate('calls', this)"><span class="nav-icon">â˜</span> Calls</div>
      <div class="nav-item" onclick="navigate('wallet', this)"><span class="nav-icon">â—ˆ</span> Wallet</div>
      <div class="nav-section-label">Finance</div>
      <div class="nav-item" onclick="navigate('budget', this)"><span class="nav-icon">â—‰</span> Budget</div>
      <div class="nav-item" onclick="navigate('bills', this)"><span class="nav-icon">âš‘</span> Bills<span class="nav-badge" style="background:var(--red)">!</span></div>
      <div class="nav-item" onclick="navigate('categorisation', this)"><span class="nav-icon">âŠ›</span> Categorisation</div>
      <div class="nav-item" onclick="navigate('vat', this)"><span class="nav-icon">â—§</span> VAT Return</div>
      <div class="nav-item" onclick="navigate('tax', this)"><span class="nav-icon">â—¨</span> Tax Return</div>
      <div class="nav-section-label">Lifestyle</div>
      <div class="nav-item" onclick="navigate('inventory', this)"><span class="nav-icon">âŠŸ</span> Inventory</div>
      <div class="nav-item" onclick="navigate('meals', this)"><span class="nav-icon">âŠ•</span> Meals</div>
      <div class="nav-item" onclick="navigate('trips', this)"><span class="nav-icon">â—</span> Trips</div>
      <div class="nav-item" onclick="navigate('parcels', this)"><span class="nav-icon">âŠ¡</span> Parcels<span class="nav-badge">2</span></div>
    </div>
    <div class="sidebar-profile">
      <div class="profile-avatar">O</div>
      <div>
        <div class="profile-name">Overwatch</div>
        <div class="profile-role">Personal Â· Work</div>
      </div>
    </div>
  </div>

  <div class="main">
    <div class="topbar">
      <div>
        <div class="topbar-title" id="topbar-title">Dashboard</div>
        <div class="topbar-sub" id="topbar-sub">Saturday, 28 February 2026</div>
      </div>
      <div class="topbar-actions">
        <button class="btn btn-ghost" onclick="showToast('ğŸ”„ Syncing all accounts...')">Sync</button>
        <button class="btn btn-primary" id="action-btn" onclick="handleAction()">+ Add Task</button>
        <div class="notif-bell" onclick="toggleNotif()">ğŸ””<div class="notif-dot"></div></div>
      </div>
    </div>

    <div class="notif-panel" id="notif-panel">
      <div class="notif-header">
        <div class="notif-title">Notifications</div>
        <div class="notif-clear" onclick="clearNotifs()">Clear all</div>
      </div>
      <div class="notif-list">
        <div class="notif-item"><div class="notif-ico">âš‘</div><div class="notif-body"><div class="notif-msg">Netflix price increased from Â£10.99 to Â£13.99/mo</div><div class="notif-time">2 hours ago</div></div></div>
        <div class="notif-item"><div class="notif-ico">ğŸ“¦</div><div class="notif-body"><div class="notif-msg">Your ASOS order is out for delivery today</div><div class="notif-time">9:14 AM</div></div></div>
        <div class="notif-item"><div class="notif-ico">âœ‰</div><div class="notif-body"><div class="notif-msg">Email from HMRC â€” Tax return reminder added to tasks</div><div class="notif-time">Yesterday</div></div></div>
        <div class="notif-item"><div class="notif-ico">ğŸ¥›</div><div class="notif-body"><div class="notif-msg">Low stock: Milk (1 unit remaining)</div><div class="notif-time">Yesterday</div></div></div>
        <div class="notif-item"><div class="notif-ico">ğŸ“</div><div class="notif-body"><div class="notif-msg">Voicemail from Dr. Smith summarised and added to tasks</div><div class="notif-time">2 days ago</div></div></div>
      </div>
    </div>

    <!-- DASHBOARD -->
    <div class="content active" id="view-dashboard">
      <div class="card whats-new" style="margin-bottom:16px;">
        <div class="card-header">
          <div class="card-icon" style="background:rgba(26,42,74,0.4); font-size:16px;">âœ¦</div>
          <div>
            <div class="card-title">Your Taste Profile</div>
            <div class="card-sub">Click to toggle Â· Drag to reorder</div>
          </div>
          <button class="btn btn-ghost" style="margin-left:auto; font-size:11px; padding:6px 12px; border-color:rgba(255,255,255,0.15); color:rgba(255,255,255,0.5);" onclick="addTag()">+ Add interest</button>
        </div>
        <div class="whats-new-body">
          <div class="profile-tags" id="profile-tags">
            <span class="profile-tag tag-active" onclick="toggleTag(this)">ğŸ“ˆ Stocks & Trading</span>
            <span class="profile-tag tag-active" onclick="toggleTag(this)">ğŸ’» Software Dev</span>
            <span class="profile-tag tag-active" onclick="toggleTag(this)">ğŸœ Asian Cuisine</span>
            <span class="profile-tag tag-active" onclick="toggleTag(this)">ğŸ‹ï¸ Gym</span>
            <span class="profile-tag tag-inactive" onclick="toggleTag(this)">ğŸ® Gaming</span>
            <span class="profile-tag tag-active" onclick="toggleTag(this)">â˜• Coffee</span>
            <span class="profile-tag tag-inactive" onclick="toggleTag(this)">ğŸ“š Finance Books</span>
            <span class="profile-tag tag-active" onclick="toggleTag(this)">âœˆï¸ Travel</span>
            <span class="profile-tag tag-add" onclick="addTag()">+ Add</span>
          </div>
        </div>
      </div>
      <div class="stat-row">
        <div class="stat-card"><div class="stat-value">5</div><div class="stat-label">Open Tasks</div><div class="stat-change change-down">â†‘ 2 from emails</div></div>
        <div class="stat-card"><div class="stat-value">Â£1,842</div><div class="stat-label">Spent This Month</div><div class="stat-change change-up">â†“ 8% vs last month</div></div>
        <div class="stat-card"><div class="stat-value">2</div><div class="stat-label">Parcels En Route</div><div class="stat-change" style="color:var(--amber)">1 out for delivery</div></div>
        <div class="stat-card"><div class="stat-value">3</div><div class="stat-label">Events This Week</div><div class="stat-change" style="color:var(--ink3)">Next: Mon 9AM</div></div>
      </div>
      <div class="dashboard-grid">
        <div class="card">
          <div class="card-header"><div class="card-icon" style="background:var(--green-light);">âœ“</div><div><div class="card-title">Tasks</div><div class="card-sub">5 pending</div></div></div>
          <div class="card-body">
            <div class="task-item" onclick="toggleTask(this)"><div class="task-check"></div><div class="task-text">Submit self-assessment tax return to HMRC</div><div class="task-source">email</div></div>
            <div class="task-item" onclick="toggleTask(this)"><div class="task-check done">âœ“</div><div class="task-text done">Review Q4 management accounts</div><div class="task-source">manual</div></div>
            <div class="task-item" onclick="toggleTask(this)"><div class="task-check"></div><div class="task-text">Book dentist appointment â€” voicemail follow up</div><div class="task-source">call</div></div>
            <div class="task-item" onclick="toggleTask(this)"><div class="task-check"></div><div class="task-text">Renew car insurance â€” expires 15 March</div><div class="task-source">email</div></div>
          </div>
        </div>
        <div class="card">
          <div class="card-header"><div class="card-icon" style="background:var(--blue-light);">âœ‰</div><div><div class="card-title">Recent Emails</div><div class="card-sub">AI summarised</div></div></div>
          <div class="card-body">
            <div class="email-item"><div class="email-avatar" style="background:#dc2626;">H</div><div class="email-content"><div class="email-from">HMRC</div><div class="email-subject">Self Assessment â€” Action Required</div><div class="email-summary">â†’ Tax return deadline 31 Jan. File now to avoid penalty.</div></div><div class="email-time">9:02</div></div>
            <div class="email-item"><div class="email-avatar" style="background:#7c3aed;">N</div><div class="email-content"><div class="email-from">Netflix</div><div class="email-subject">Your plan price is changing</div><div class="email-summary">â†’ Price rising Â£10.99 â†’ Â£13.99 from 15 Mar.</div></div><div class="email-time">Fri</div></div>
            <div class="email-item"><div class="email-avatar" style="background:#059669;">A</div><div class="email-content"><div class="email-from">ASOS</div><div class="email-subject">Your order is on its way ğŸ‰</div><div class="email-summary">â†’ Tracking: EVR-28291. Est. delivery today.</div></div><div class="email-time">Thu</div></div>
          </div>
        </div>
        <div class="card">
          <div class="card-header"><div class="card-icon" style="background:var(--amber-light);">â—‰</div><div><div class="card-title">Budget â€” Feb</div><div class="card-sub">Â£1,842 of Â£2,500</div></div></div>
          <div class="card-body">
            <div class="budget-chart-wrap">
              <div class="pie-wrap">
                <svg width="90" height="90" viewBox="0 0 90 90">
                  <circle cx="45" cy="45" r="38" fill="none" stroke="#f5f2ed" stroke-width="14"/>
                  <circle cx="45" cy="45" r="38" fill="none" stroke="#3b82f6" stroke-width="14" stroke-dasharray="57 182" stroke-dashoffset="0"/>
                  <circle cx="45" cy="45" r="38" fill="none" stroke="#10b981" stroke-width="14" stroke-dasharray="46 182" stroke-dashoffset="-57"/>
                  <circle cx="45" cy="45" r="38" fill="none" stroke="#f59e0b" stroke-width="14" stroke-dasharray="34 182" stroke-dashoffset="-103"/>
                  <circle cx="45" cy="45" r="38" fill="none" stroke="#ef4444" stroke-width="14" stroke-dasharray="28 182" stroke-dashoffset="-137"/>
                  <circle cx="45" cy="45" r="38" fill="none" stroke="#8b5cf6" stroke-width="14" stroke-dasharray="17 182" stroke-dashoffset="-165"/>
                </svg>
                <div class="pie-center"><div class="pie-total">74%</div><div class="pie-label">used</div></div>
              </div>
              <div class="budget-legend">
                <div class="budget-item"><div class="budget-dot" style="background:#3b82f6"></div><div class="budget-cat">Housing</div><div class="budget-amt">Â£780</div><div class="budget-pct">31%</div></div>
                <div class="budget-item"><div class="budget-dot" style="background:#10b981"></div><div class="budget-cat">Food</div><div class="budget-amt">Â£340</div><div class="budget-pct">14%</div></div>
                <div class="budget-item"><div class="budget-dot" style="background:#f59e0b"></div><div class="budget-cat">Transport</div><div class="budget-amt">Â£210</div><div class="budget-pct">8%</div></div>
                <div class="budget-item"><div class="budget-dot" style="background:#ef4444"></div><div class="budget-cat">Shopping</div><div class="budget-amt">Â£312</div><div class="budget-pct">12%</div></div>
                <div class="budget-item"><div class="budget-dot" style="background:#8b5cf6"></div><div class="budget-cat">Subs</div><div class="budget-amt">Â£200</div><div class="budget-pct">8%</div></div>
              </div>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-header"><div class="card-icon" style="background:var(--green-light);">âŠŸ</div><div><div class="card-title">Inventory</div><div class="card-sub">1 item low</div></div></div>
          <div class="card-body">
            <div class="inventory-item"><div class="inv-emoji">ğŸ¥›</div><div class="inv-name">Milk</div><div class="inv-qty">1 jug</div><div class="stock-bar"><div class="stock-fill" style="width:12%; background:#ef4444;"></div></div></div>
            <div class="inventory-item"><div class="inv-emoji">ğŸ</div><div class="inv-name">Bread</div><div class="inv-qty">1 loaf</div><div class="stock-bar"><div class="stock-fill" style="width:35%; background:#f59e0b;"></div></div></div>
            <div class="inventory-item"><div class="inv-emoji">ğŸ¥š</div><div class="inv-name">Eggs</div><div class="inv-qty">8</div><div class="stock-bar"><div class="stock-fill" style="width:65%; background:#10b981;"></div></div></div>
            <div class="inventory-item"><div class="inv-emoji">â˜•</div><div class="inv-name">Coffee</div><div class="inv-qty">250g</div><div class="stock-bar"><div class="stock-fill" style="width:80%; background:#10b981;"></div></div></div>
            <div class="inventory-item"><div class="inv-emoji">ğŸš</div><div class="inv-name">Rice</div><div class="inv-qty">500g</div><div class="stock-bar"><div class="stock-fill" style="width:50%; background:#3b82f6;"></div></div></div>
          </div>
        </div>
        <div class="card">
          <div class="card-header"><div class="card-icon" style="background:var(--amber-light);">âŠ¡</div><div><div class="card-title">Parcels</div><div class="card-sub">2 active</div></div></div>
          <div class="card-body">
            <div class="parcel-item"><div class="parcel-icon">ğŸ“¦</div><div class="parcel-info"><div class="parcel-name">ASOS Order #28291</div><div class="parcel-courier">Evri Â· EVR-28291-UK</div></div><div class="status-pill status-transit">Out for delivery</div></div>
            <div class="parcel-item"><div class="parcel-icon">ğŸ“¦</div><div class="parcel-info"><div class="parcel-name">Amazon â€” GPU Cable</div><div class="parcel-courier">Royal Mail Â· RM-774821-GB</div></div><div class="status-pill status-processing">In transit</div></div>
          </div>
        </div>
        <div class="card">
          <div class="card-header"><div class="card-icon" style="background:var(--red-light);">âš‘</div><div><div class="card-title">Bills & Subscriptions</div><div class="card-sub">1 price change detected</div></div></div>
          <div class="card-body">
            <div class="bill-item"><div class="bill-icon" style="background:#e50914; color:white;">N</div><div class="bill-info"><div class="bill-name">Netflix</div><div class="bill-freq">Monthly Â· 15th</div></div><div><div class="bill-amount">Â£13.99</div><div class="price-change">â†‘ was Â£10.99</div></div></div>
            <div class="bill-item"><div class="bill-icon" style="background:#1db954; color:white;">S</div><div class="bill-info"><div class="bill-name">Spotify</div><div class="bill-freq">Monthly Â· 3rd</div></div><div class="bill-amount">Â£11.99</div></div>
            <div class="bill-item"><div class="bill-icon" style="background:#0078d4; color:white;">M</div><div class="bill-info"><div class="bill-name">Microsoft 365</div><div class="bill-freq">Monthly Â· 1st</div></div><div class="bill-amount">Â£9.99</div></div>
          </div>
        </div>
      </div>
    </div>

    <!-- TASKS VIEW -->
    <div class="content" id="view-tasks">
      <div class="add-task-row">
        <input class="task-input" id="new-task-input" placeholder="Add a new task..." onkeydown="if(event.key==='Enter') addNewTask()"/>
        <button class="btn btn-primary" onclick="addNewTask()">Add Task</button>
      </div>
      <div class="card">
        <div class="card-header"><div class="card-icon" style="background:var(--green-light);">âœ“</div><div><div class="card-title">All Tasks</div><div class="card-sub">From emails, calls, and manual entries</div></div></div>
        <div class="card-body" id="all-tasks-list">
          <div class="task-item" onclick="toggleTask(this)"><div class="task-check"></div><div class="task-text">Submit self-assessment tax return to HMRC</div><div class="task-source">email</div></div>
          <div class="task-item" onclick="toggleTask(this)"><div class="task-check done">âœ“</div><div class="task-text done">Review Q4 management accounts</div><div class="task-source">manual</div></div>
          <div class="task-item" onclick="toggleTask(this)"><div class="task-check"></div><div class="task-text">Book dentist appointment â€” voicemail follow up</div><div class="task-source">call</div></div>
          <div class="task-item" onclick="toggleTask(this)"><div class="task-check"></div><div class="task-text">Renew car insurance â€” expires 15 March</div><div class="task-source">email</div></div>
          <div class="task-item" onclick="toggleTask(this)"><div class="task-check"></div><div class="task-text">Review AAT Level 2 practice exam papers</div><div class="task-source">manual</div></div>
        </div>
      </div>
    </div>

    <!-- EMAILS VIEW -->
    <div class="content" id="view-emails">
      <div class="card">
        <div class="card-header"><div class="card-icon" style="background:var(--blue-light);">âœ‰</div><div><div class="card-title">Inbox â€” AI Summarised</div><div class="card-sub">All email providers Â· Nylas unified</div></div></div>
        <div class="card-body">
          <div class="email-item"><div class="email-avatar" style="background:#dc2626;">H</div><div class="email-content"><div class="email-from">HMRC</div><div class="email-subject">Self Assessment 2024/25 â€” Action Required</div><div class="email-summary">â†’ File your self assessment return by 31 Jan. Penalty of Â£100 if late. Task added.</div></div><div class="email-time">09:02</div></div>
          <div class="email-item"><div class="email-avatar" style="background:#7c3aed;">N</div><div class="email-content"><div class="email-from">Netflix</div><div class="email-subject">Your plan price is changing from 15 March</div><div class="email-summary">â†’ Standard plan rising from Â£10.99 to Â£13.99/month. Bill alert created.</div></div><div class="email-time">Fri</div></div>
          <div class="email-item"><div class="email-avatar" style="background:#059669;">A</div><div class="email-content"><div class="email-from">ASOS</div><div class="email-subject">Your order is on its way ğŸ‰</div><div class="email-summary">â†’ Order dispatched via Evri. Tracking EVR-28291. Est. arrival today. Parcel added.</div></div><div class="email-time">Thu</div></div>
          <div class="email-item"><div class="email-avatar" style="background:#0284c7;">B</div><div class="email-content"><div class="email-from">Barclays</div><div class="email-subject">Your February statement is ready</div><div class="email-summary">â†’ Statement for Feb 2026 available. Total spend Â£1,842. No action required.</div></div><div class="email-time">Wed</div></div>
          <div class="email-item"><div class="email-avatar" style="background:#b45309;">E</div><div class="email-content"><div class="email-from">Eventim</div><div class="email-subject">Your tickets for Glastonbury 2026</div><div class="email-summary">â†’ 2x tickets attached. Event 25 Jun 2026. Tickets saved to Wallet.</div></div><div class="email-time">Tue</div></div>
        </div>
      </div>
    </div>

    <!-- CALLS VIEW -->
    <div class="content" id="view-calls">
      <div class="card">
        <div class="card-header"><div class="card-icon" style="background:var(--green-light);">â˜</div><div><div class="card-title">Call Log â€” AI Summarised</div><div class="card-sub">Whisper transcription Â· Claude summary</div></div></div>
        <div class="card-body">
          <div class="call-item"><div class="call-avatar" style="background:#7c3aed;">D</div><div class="call-info"><div class="call-name">Dr. Smith â€” GP Surgery</div><div class="call-summary">Voicemail: Appointment available Mon 2 Mar at 10:30AM. Call back to confirm. Task added to book.</div></div><div class="call-meta"><div class="call-time">Yesterday</div><div class="call-duration">0:42</div></div></div>
          <div class="call-item"><div class="call-avatar" style="background:#0284c7;">M</div><div class="call-info"><div class="call-name">Manager â€” Work</div><div class="call-summary">Discussion re: Q1 management accounts deadline moved to 10 March. Review meeting booked for 12 Mar. Event added.</div></div><div class="call-meta"><div class="call-time">Thu</div><div class="call-duration">4:17</div></div></div>
          <div class="call-item"><div class="call-avatar" style="background:#059669;">I</div><div class="call-info"><div class="call-name">Insurance â€” Admiral</div><div class="call-summary">Renewal quote provided: Â£642/year. Valid 14 days. Task created to compare and renew before expiry.</div></div><div class="call-meta"><div class="call-time">Mon</div><div class="call-duration">6:54</div></div></div>
        </div>
      </div>
    </div>

    <!-- WALLET VIEW -->
    <div class="content" id="view-wallet">
      <div style="max-width:380px;">
        <div class="wallet-card">
          <div class="wallet-type">Event Ticket</div>
          <div class="wallet-event">Glastonbury Festival 2026</div>
          <div class="wallet-detail">25â€“29 June 2026 Â· Worthy Farm, Somerset</div>
          <div class="wallet-detail" style="margin-top:4px;">General Admission Â· x2</div>
          <div class="wallet-barcode"></div>
        </div>
        <div class="wallet-card" style="background:linear-gradient(135deg,#1e3a5f,#2d5a8e);">
          <div class="wallet-type">Travel Card</div>
          <div class="wallet-event">LNER â€” London to Leeds</div>
          <div class="wallet-detail">15 March 2026 Â· 08:45 departure Â· Coach C</div>
          <div class="wallet-detail" style="margin-top:4px;">Standard Â· 1 Adult</div>
          <div class="wallet-barcode"></div>
        </div>
      </div>
    </div>

    <!-- BUDGET VIEW â€” UPDATED WITH TRANSACTIONS -->
    <div class="content" id="view-budget">
      <div class="stat-row">
        <div class="stat-card"><div class="stat-value">Â£2,500</div><div class="stat-label">Monthly Budget</div></div>
        <div class="stat-card"><div class="stat-value">Â£1,842</div><div class="stat-label">Spent</div><div class="stat-change change-up">â†“ 8% vs Jan</div></div>
        <div class="stat-card"><div class="stat-value">Â£658</div><div class="stat-label">Remaining</div><div class="stat-change" style="color:var(--green)">26% of budget</div></div>
        <div class="stat-card"><div class="stat-value">Â£61</div><div class="stat-label">Daily Average</div></div>
      </div>

      <div style="display:grid; grid-template-columns:1fr 1.6fr; gap:16px;">

        <!-- Pie chart card -->
        <div class="card">
          <div class="card-header"><div class="card-icon" style="background:var(--amber-light);">â—‰</div><div><div class="card-title">February Breakdown</div><div class="card-sub">Linked via TrueLayer Â· Auto-categorised</div></div></div>
          <div class="card-body">
            <div class="budget-chart-wrap" style="flex-direction:column; gap:20px; align-items:flex-start;">
              <div class="pie-wrap" style="width:130px;height:130px; margin:0 auto;">
                <svg width="130" height="130" viewBox="0 0 130 130">
                  <circle cx="65" cy="65" r="54" fill="none" stroke="#f5f2ed" stroke-width="18"/>
                  <circle cx="65" cy="65" r="54" fill="none" stroke="#3b82f6" stroke-width="18" stroke-dasharray="104 236" stroke-dashoffset="0"/>
                  <circle cx="65" cy="65" r="54" fill="none" stroke="#10b981" stroke-width="18" stroke-dasharray="80 236" stroke-dashoffset="-104"/>
                  <circle cx="65" cy="65" r="54" fill="none" stroke="#f59e0b" stroke-width="18" stroke-dasharray="50 236" stroke-dashoffset="-184"/>
                  <circle cx="65" cy="65" r="54" fill="none" stroke="#ef4444" stroke-width="18" stroke-dasharray="74 236" stroke-dashoffset="-234"/>
                  <circle cx="65" cy="65" r="54" fill="none" stroke="#8b5cf6" stroke-width="18" stroke-dasharray="40 236" stroke-dashoffset="-308"/>
                </svg>
                <div class="pie-center"><div class="pie-total" style="font-size:16px;">Â£1,842</div><div class="pie-label">Feb 2026</div></div>
              </div>
              <div class="budget-legend" style="width:100%; gap:10px;">
                <div class="budget-item"><div class="budget-dot" style="background:#3b82f6;width:10px;height:10px;"></div><div class="budget-cat">Housing & Utilities</div><div class="budget-amt">Â£780</div><div class="budget-pct">31%</div></div>
                <div class="budget-item"><div class="budget-dot" style="background:#10b981;width:10px;height:10px;"></div><div class="budget-cat">Food & Groceries</div><div class="budget-amt">Â£340</div><div class="budget-pct">18%</div></div>
                <div class="budget-item"><div class="budget-dot" style="background:#f59e0b;width:10px;height:10px;"></div><div class="budget-cat">Transport</div><div class="budget-amt">Â£210</div><div class="budget-pct">11%</div></div>
                <div class="budget-item"><div class="budget-dot" style="background:#ef4444;width:10px;height:10px;"></div><div class="budget-cat">Shopping</div><div class="budget-amt">Â£312</div><div class="budget-pct">17%</div></div>
                <div class="budget-item"><div class="budget-dot" style="background:#8b5cf6;width:10px;height:10px;"></div><div class="budget-cat">Subscriptions</div><div class="budget-amt">Â£200</div><div class="budget-pct">11%</div></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Transactions card -->
        <div class="card">
          <div class="card-header">
            <div class="card-icon" style="background:var(--blue-light);">â‰¡</div>
            <div>
              <div class="card-title">Transactions</div>
              <div class="card-sub">February 2026 Â· Auto-categorised Â· TrueLayer</div>
            </div>
            <button class="btn btn-ghost" style="margin-left:auto; font-size:11px; padding:6px 12px;" onclick="showToast('ğŸ” Filtering transactions...')">Filter</button>
          </div>
          <div class="card-body" style="padding:10px 18px;">

            <!-- Tesco â€” has receipt attached -->
            <div class="tx-item" onclick="openReceipt()">
              <div class="tx-logo tesco-logo" style="width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:10px;">T</div>
              <div class="tx-info">
                <div class="tx-merchant">
                  Tesco Superstore
                  <span class="receipt-badge" onclick="event.stopPropagation(); openReceipt()">ğŸ“„ Receipt</span>
                </div>
                <div class="tx-meta">
                  <span class="cat-pill cat-food">Food</span>
                  &nbsp;Â· Lincoln, Tritton Rd Â· 27 Feb
                </div>
              </div>
              <div class="tx-right">
                <div class="tx-amount debit">âˆ’Â£47.83</div>
                <div class="tx-date">Today</div>
              </div>
            </div>

            <!-- Barclays salary -->
            <div class="tx-item">
              <div class="tx-logo" style="background:#00395d;color:white;font-size:10px;font-weight:800;">BAR</div>
              <div class="tx-info">
                <div class="tx-merchant">Salary â€” Employer Ltd</div>
                <div class="tx-meta"><span class="cat-pill cat-housing">Income</span> &nbsp;Â· Direct credit Â· 25 Feb</div>
              </div>
              <div class="tx-right">
                <div class="tx-amount credit">+Â£1,650.00</div>
                <div class="tx-date">25 Feb</div>
              </div>
            </div>

            <!-- TfL -->
            <div class="tx-item">
              <div class="tx-logo" style="background:#e1251b;color:white;font-size:11px;font-weight:800;">TfL</div>
              <div class="tx-info">
                <div class="tx-merchant">Transport for London</div>
                <div class="tx-meta"><span class="cat-pill cat-transport">Transport</span> &nbsp;Â· Contactless Â· 24 Feb</div>
              </div>
              <div class="tx-right">
                <div class="tx-amount debit">âˆ’Â£4.80</div>
                <div class="tx-date">24 Feb</div>
              </div>
            </div>

            <!-- ASOS -->
            <div class="tx-item">
              <div class="tx-logo" style="background:#1a1a1a;color:white;font-size:10px;font-weight:800;">ASO</div>
              <div class="tx-info">
                <div class="tx-merchant">ASOS</div>
                <div class="tx-meta"><span class="cat-pill cat-shopping">Shopping</span> &nbsp;Â· Online Â· 23 Feb</div>
              </div>
              <div class="tx-right">
                <div class="tx-amount debit">âˆ’Â£62.00</div>
                <div class="tx-date">23 Feb</div>
              </div>
            </div>

            <!-- Netflix -->
            <div class="tx-item">
              <div class="tx-logo" style="background:#e50914;color:white;font-size:11px;font-weight:800;">N</div>
              <div class="tx-info">
                <div class="tx-merchant">Netflix</div>
                <div class="tx-meta"><span class="cat-pill cat-subs">Subscription</span> &nbsp;Â· Recurring Â· 15 Feb</div>
              </div>
              <div class="tx-right">
                <div class="tx-amount debit">âˆ’Â£13.99</div>
                <div class="tx-date">15 Feb</div>
              </div>
            </div>

            <!-- Tesco Express â€” no receipt -->
            <div class="tx-item">
              <div class="tx-logo tesco-logo" style="width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:10px;">T</div>
              <div class="tx-info">
                <div class="tx-merchant">Tesco Express</div>
                <div class="tx-meta"><span class="cat-pill cat-food">Food</span> &nbsp;Â· Lincoln, High St Â· 14 Feb</div>
              </div>
              <div class="tx-right">
                <div class="tx-amount debit">âˆ’Â£8.42</div>
                <div class="tx-date">14 Feb</div>
              </div>
            </div>

            <!-- Amazon -->
            <div class="tx-item">
              <div class="tx-logo" style="background:#ff9900;color:#111;font-size:10px;font-weight:800;">AMZ</div>
              <div class="tx-info">
                <div class="tx-merchant">Amazon</div>
                <div class="tx-meta"><span class="cat-pill cat-shopping">Shopping</span> &nbsp;Â· Online Â· 12 Feb</div>
              </div>
              <div class="tx-right">
                <div class="tx-amount debit">âˆ’Â£24.99</div>
                <div class="tx-date">12 Feb</div>
              </div>
            </div>

            <!-- Spotify -->
            <div class="tx-item">
              <div class="tx-logo" style="background:#1db954;color:white;font-size:11px;font-weight:800;">S</div>
              <div class="tx-info">
                <div class="tx-merchant">Spotify Premium</div>
                <div class="tx-meta"><span class="cat-pill cat-subs">Subscription</span> &nbsp;Â· Recurring Â· 3 Feb</div>
              </div>
              <div class="tx-right">
                <div class="tx-amount debit">âˆ’Â£11.99</div>
                <div class="tx-date">3 Feb</div>
              </div>
            </div>

          </div>
        </div>

      </div>
    </div>

    <!-- BILLS VIEW -->
    <div class="content" id="view-bills">
      <div class="card">
        <div class="card-header"><div class="card-icon" style="background:var(--red-light);">âš‘</div><div><div class="card-title">Bills & Subscriptions</div><div class="card-sub">Auto-detected from recurring transactions</div></div></div>
        <div class="card-body">
          <div class="bill-item"><div class="bill-icon" style="background:#e50914;color:white;">N</div><div class="bill-info"><div class="bill-name">Netflix</div><div class="bill-freq">Monthly Â· 15th Â· Standard Plan</div></div><div><div class="bill-amount">Â£13.99</div><div class="price-change">â†‘ was Â£10.99</div></div></div>
          <div class="bill-item"><div class="bill-icon" style="background:#1db954;color:white;">S</div><div class="bill-info"><div class="bill-name">Spotify Premium</div><div class="bill-freq">Monthly Â· 3rd</div></div><div class="bill-amount">Â£11.99</div></div>
          <div class="bill-item"><div class="bill-icon" style="background:#0078d4;color:white;">M</div><div class="bill-info"><div class="bill-name">Microsoft 365</div><div class="bill-freq">Monthly Â· 1st</div></div><div class="bill-amount">Â£9.99</div></div>
          <div class="bill-item"><div class="bill-icon" style="background:#00b4d8;color:white;">C</div><div class="bill-info"><div class="bill-name">Claude AI Pro</div><div class="bill-freq">Monthly Â· 22nd</div></div><div class="bill-amount">Â£18.00</div></div>
          <div class="bill-item"><div class="bill-icon" style="background:#ff9900;color:white;">A</div><div class="bill-info"><div class="bill-name">Amazon Prime</div><div class="bill-freq">Monthly Â· 8th</div></div><div><div class="bill-amount">Â£8.99</div><div class="price-change">â†‘ was Â£7.99</div></div></div>
        </div>
      </div>
    </div>

    <!-- CATEGORISATION VIEW -->
    <div class="content" id="view-categorisation">
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px;">
        <div class="card">
          <div class="card-header">
            <div class="card-icon" style="background:#dbeafe;">âŠ›</div>
            <div><div class="card-title">Auto-Categorisation Engine</div><div class="card-sub">AI rule-based Â· Learns from corrections</div></div>
          </div>
          <div class="card-body">
            <div style="font-size:11px;font-family:'DM Mono',monospace;color:var(--ink3);margin-bottom:12px;">RECURRING PATTERNS DETECTED â€” FEBRUARY 2026</div>
            <!-- Categorised transaction rows -->
            <div class="tx-item" style="border-bottom:1px solid var(--border);padding:10px 0;">
              <div class="tx-logo" style="background:#e50914;color:white;font-size:11px;font-weight:800;">N</div>
              <div class="tx-info">
                <div class="tx-merchant">Netflix <span class="cat-pill cat-subs" style="margin-left:4px;">Subscription</span></div>
                <div class="tx-meta">Recurring Â· Monthly Â· 15th Â· 12 months detected</div>
              </div>
              <div class="tx-right"><div class="tx-amount debit">âˆ’Â£13.99</div><div class="tx-date" style="color:var(--green);font-size:9px;">âœ“ Auto</div></div>
            </div>
            <div class="tx-item" style="border-bottom:1px solid var(--border);padding:10px 0;">
              <div class="tx-logo" style="background:#1db954;color:white;font-size:11px;font-weight:800;">S</div>
              <div class="tx-info">
                <div class="tx-merchant">Spotify <span class="cat-pill cat-subs" style="margin-left:4px;">Subscription</span></div>
                <div class="tx-meta">Recurring Â· Monthly Â· 3rd Â· 18 months detected</div>
              </div>
              <div class="tx-right"><div class="tx-amount debit">âˆ’Â£11.99</div><div class="tx-date" style="color:var(--green);font-size:9px;">âœ“ Auto</div></div>
            </div>
            <div class="tx-item" style="border-bottom:1px solid var(--border);padding:10px 0;">
              <div class="tx-logo" style="background:#00539f;color:white;font-size:11px;font-weight:800;">T</div>
              <div class="tx-info">
                <div class="tx-merchant">Tesco <span class="cat-pill cat-food" style="margin-left:4px;">Groceries</span></div>
                <div class="tx-meta">Recurring Â· Weekly Â· Avg Â£44.20 Â· 24 occurrences</div>
              </div>
              <div class="tx-right"><div class="tx-amount debit">âˆ’Â£47.83</div><div class="tx-date" style="color:var(--green);font-size:9px;">âœ“ Auto</div></div>
            </div>
            <div class="tx-item" style="border-bottom:1px solid var(--border);padding:10px 0;">
              <div class="tx-logo" style="background:#0078d4;color:white;font-size:11px;font-weight:800;">M</div>
              <div class="tx-info">
                <div class="tx-merchant">Microsoft 365 <span class="cat-pill cat-subs" style="margin-left:4px;">Subscription</span></div>
                <div class="tx-meta">Recurring Â· Monthly Â· 1st Â· 8 months detected</div>
              </div>
              <div class="tx-right"><div class="tx-amount debit">âˆ’Â£9.99</div><div class="tx-date" style="color:var(--green);font-size:9px;">âœ“ Auto</div></div>
            </div>
            <div class="tx-item" style="border-bottom:1px solid var(--border);padding:10px 0;">
              <div class="tx-logo" style="background:#e1251b;color:white;font-size:11px;font-weight:800;">TfL</div>
              <div class="tx-info">
                <div class="tx-merchant">Transport for London <span class="cat-pill cat-transport" style="margin-left:4px;">Transport</span></div>
                <div class="tx-meta">Recurring Â· Weekdays Â· Avg Â£5.20 Â· 48 occurrences</div>
              </div>
              <div class="tx-right"><div class="tx-amount debit">âˆ’Â£4.80</div><div class="tx-date" style="color:var(--green);font-size:9px;">âœ“ Auto</div></div>
            </div>
            <div class="tx-item" style="border-bottom:1px solid var(--border);padding:10px 0;">
              <div class="tx-logo" style="background:#00539f;color:white;font-size:11px;font-weight:800;">T</div>
              <div class="tx-info">
                <div class="tx-merchant">Tesco Express <span class="cat-pill cat-food" style="margin-left:4px;">Groceries</span></div>
                <div class="tx-meta">Recurring Â· 2â€“3x weekly Â· Avg Â£7.80 Â· Top-up shops</div>
              </div>
              <div class="tx-right"><div class="tx-amount debit">âˆ’Â£8.42</div><div class="tx-date" style="color:var(--green);font-size:9px;">âœ“ Auto</div></div>
            </div>
            <div class="tx-item" style="padding:10px 0;">
              <div class="tx-logo" style="background:#ff9900;color:#111;font-size:10px;font-weight:800;">AMZ</div>
              <div class="tx-info">
                <div class="tx-merchant">Amazon Prime <span class="cat-pill cat-subs" style="margin-left:4px;">Subscription</span></div>
                <div class="tx-meta">Recurring Â· Monthly Â· 8th Â· Price increase detected</div>
              </div>
              <div class="tx-right"><div class="tx-amount debit">âˆ’Â£8.99</div><div class="tx-date" style="color:var(--red);font-size:9px;">â†‘ Price</div></div>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-header">
            <div class="card-icon" style="background:#fef3c7;">âŠ™</div>
            <div><div class="card-title">Category Breakdown</div><div class="card-sub">Monthly recurring spend by category</div></div>
          </div>
          <div class="card-body">
            <div style="margin-bottom:16px;">
              <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;">
                <div style="font-size:12px;font-weight:700;color:var(--ink);">Subscriptions</div>
                <div style="font-family:'DM Mono',monospace;font-size:12px;font-weight:600;">Â£62.96 / mo</div>
              </div>
              <div style="height:6px;background:var(--border);border-radius:3px;overflow:hidden;"><div style="height:100%;width:68%;background:#8b5cf6;border-radius:3px;"></div></div>
              <div style="font-size:10px;font-family:'DM Mono',monospace;color:var(--ink3);margin-top:4px;">Netflix Â· Spotify Â· M365 Â· Claude Â· Amazon Â· 5 services</div>
            </div>
            <div style="margin-bottom:16px;">
              <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;">
                <div style="font-size:12px;font-weight:700;color:var(--ink);">Groceries</div>
                <div style="font-family:'DM Mono',monospace;font-size:12px;font-weight:600;">Â£196.40 / mo</div>
              </div>
              <div style="height:6px;background:var(--border);border-radius:3px;overflow:hidden;"><div style="height:100%;width:85%;background:#10b981;border-radius:3px;"></div></div>
              <div style="font-size:10px;font-family:'DM Mono',monospace;color:var(--ink3);margin-top:4px;">Tesco Superstore Â· Tesco Express Â· Weekly avg Â£44.20</div>
            </div>
            <div style="margin-bottom:16px;">
              <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;">
                <div style="font-size:12px;font-weight:700;color:var(--ink);">Transport</div>
                <div style="font-family:'DM Mono',monospace;font-size:12px;font-weight:600;">Â£114.40 / mo</div>
              </div>
              <div style="height:6px;background:var(--border);border-radius:3px;overflow:hidden;"><div style="height:100%;width:52%;background:#3b82f6;border-radius:3px;"></div></div>
              <div style="font-size:10px;font-family:'DM Mono',monospace;color:var(--ink3);margin-top:4px;">TfL contactless Â· 22 journeys avg detected</div>
            </div>
            <div style="padding:12px;background:var(--bg2);border-radius:8px;border:1px solid var(--border);margin-top:8px;">
              <div style="font-size:10px;font-family:'DM Mono',monospace;color:var(--ink3);margin-bottom:6px;">AI INSIGHT</div>
              <div style="font-size:12px;color:var(--ink2);line-height:1.5;">Subscription spend has increased <strong>Â£5.99/mo</strong> since October due to Netflix and Amazon price rises. Grocery spend is <strong>12% above</strong> your 6-month average.</div>
            </div>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="card-header">
          <div class="card-icon" style="background:var(--amber-light);">âš </div>
          <div><div class="card-title">Uncategorised Transactions</div><div class="card-sub">2 transactions need review</div></div>
        </div>
        <div class="card-body">
          <div class="tx-item" style="border-bottom:1px solid var(--border);padding:10px 0;">
            <div class="tx-logo" style="background:#6b7280;color:white;font-size:10px;font-weight:800;">?</div>
            <div class="tx-info">
              <div class="tx-merchant">SUMUP*THECOFFEEHOUSE <span style="font-size:9px;font-family:'DM Mono',monospace;background:var(--amber-light);color:var(--amber);padding:2px 6px;border-radius:4px;margin-left:4px;">Unclassified</span></div>
              <div class="tx-meta">25 Feb Â· Card payment Â· Possible: Food & Drink</div>
            </div>
            <div class="tx-right">
              <div class="tx-amount debit">âˆ’Â£4.20</div>
              <div style="display:flex;gap:4px;margin-top:4px;">
                <button class="btn btn-ghost" style="padding:2px 8px;font-size:9px;" onclick="showToast('âœ“ Categorised as Food & Drink')">Food</button>
                <button class="btn btn-ghost" style="padding:2px 8px;font-size:9px;" onclick="showToast('âœ“ Category saved')">Other</button>
              </div>
            </div>
          </div>
          <div class="tx-item" style="padding:10px 0;">
            <div class="tx-logo" style="background:#6b7280;color:white;font-size:10px;font-weight:800;">?</div>
            <div class="tx-info">
              <div class="tx-merchant">PAYPAL*EBAY_SELLER <span style="font-size:9px;font-family:'DM Mono',monospace;background:var(--amber-light);color:var(--amber);padding:2px 6px;border-radius:4px;margin-left:4px;">Unclassified</span></div>
              <div class="tx-meta">18 Feb Â· Card payment Â· Possible: Shopping</div>
            </div>
            <div class="tx-right">
              <div class="tx-amount debit">âˆ’Â£32.00</div>
              <div style="display:flex;gap:4px;margin-top:4px;">
                <button class="btn btn-ghost" style="padding:2px 8px;font-size:9px;" onclick="showToast('âœ“ Categorised as Shopping')">Shopping</button>
                <button class="btn btn-ghost" style="padding:2px 8px;font-size:9px;" onclick="showToast('âœ“ Category saved')">Other</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- VAT RETURN VIEW -->
    <div class="content" id="view-vat">
      <!-- Header stats -->
      <div class="stat-row" style="grid-template-columns:repeat(4,1fr);">
        <div class="stat-card" style="border-left:3px solid #2c4a7c;">
          <div class="stat-label">VAT on Sales (Box 1)</div>
          <div class="stat-value" style="font-size:20px;margin-top:6px;">Â£4,820.00</div>
          <div class="stat-change" style="color:var(--ink3);">Output VAT @ 20%</div>
        </div>
        <div class="stat-card" style="border-left:3px solid #10b981;">
          <div class="stat-label">VAT Reclaimed (Box 4)</div>
          <div class="stat-value" style="font-size:20px;margin-top:6px;">Â£1,243.60</div>
          <div class="stat-change" style="color:var(--green);">Input VAT reclaimable</div>
        </div>
        <div class="stat-card" style="border-left:3px solid #ef4444;">
          <div class="stat-label">VAT Owed to HMRC</div>
          <div class="stat-value" style="font-size:20px;margin-top:6px;">Â£3,576.40</div>
          <div class="stat-change" style="color:var(--red);">Box 1 minus Box 4</div>
        </div>
        <div class="stat-card" style="border-left:3px solid var(--amber);">
          <div class="stat-label">Due Date</div>
          <div class="stat-value" style="font-size:20px;margin-top:6px;">7 Feb 26</div>
          <div class="stat-change" style="color:var(--amber);">Overdue â€” submit now</div>
        </div>
      </div>

      <div style="display:grid;grid-template-columns:1.2fr 1fr;gap:16px;margin-bottom:16px;">
        <!-- VAT Return Form -->
        <div class="card">
          <div class="card-header">
            <div class="card-icon" style="background:#d0ddf5;">â—§</div>
            <div><div class="card-title">VAT Return â€” Q4 Octâ€“Dec 2025</div><div class="card-sub">MTD compliant Â· Auto-populated from transactions</div></div>
            <span style="font-size:9px;font-family:'DM Mono',monospace;background:var(--amber-light);color:var(--amber);padding:3px 8px;border-radius:4px;margin-left:auto;">DRAFT</span>
          </div>
          <div class="card-body">
            <table style="width:100%;border-collapse:collapse;font-size:12px;">
              <thead>
                <tr style="border-bottom:2px solid var(--border);">
                  <th style="text-align:left;padding:6px 4px;font-family:'DM Mono',monospace;font-size:10px;color:var(--ink3);font-weight:500;letter-spacing:1px;">BOX</th>
                  <th style="text-align:left;padding:6px 4px;font-family:'DM Mono',monospace;font-size:10px;color:var(--ink3);font-weight:500;letter-spacing:1px;">DESCRIPTION</th>
                  <th style="text-align:right;padding:6px 4px;font-family:'DM Mono',monospace;font-size:10px;color:var(--ink3);font-weight:500;letter-spacing:1px;">AMOUNT</th>
                </tr>
              </thead>
              <tbody>
                <tr style="border-bottom:1px solid var(--border);">
                  <td style="padding:8px 4px;font-family:'DM Mono',monospace;font-weight:700;color:#2c4a7c;">1</td>
                  <td style="padding:8px 4px;color:var(--ink2);">VAT due on sales and other outputs</td>
                  <td style="padding:8px 4px;text-align:right;font-family:'DM Mono',monospace;font-weight:600;">Â£4,820.00</td>
                </tr>
                <tr style="border-bottom:1px solid var(--border);">
                  <td style="padding:8px 4px;font-family:'DM Mono',monospace;font-weight:700;color:#2c4a7c;">2</td>
                  <td style="padding:8px 4px;color:var(--ink2);">VAT due on acquisitions from EU</td>
                  <td style="padding:8px 4px;text-align:right;font-family:'DM Mono',monospace;font-weight:600;">Â£0.00</td>
                </tr>
                <tr style="border-bottom:1px solid var(--border);">
                  <td style="padding:8px 4px;font-family:'DM Mono',monospace;font-weight:700;color:#2c4a7c;">3</td>
                  <td style="padding:8px 4px;color:var(--ink2);">Total VAT due (Box 1 + Box 2)</td>
                  <td style="padding:8px 4px;text-align:right;font-family:'DM Mono',monospace;font-weight:600;">Â£4,820.00</td>
                </tr>
                <tr style="border-bottom:1px solid var(--border);background:rgba(16,185,129,0.04);">
                  <td style="padding:8px 4px;font-family:'DM Mono',monospace;font-weight:700;color:#166534;">4</td>
                  <td style="padding:8px 4px;color:var(--ink2);">VAT reclaimed on purchases and inputs</td>
                  <td style="padding:8px 4px;text-align:right;font-family:'DM Mono',monospace;font-weight:600;color:#166534;">Â£1,243.60</td>
                </tr>
                <tr style="border-bottom:2px solid var(--border);background:rgba(239,68,68,0.04);">
                  <td style="padding:8px 4px;font-family:'DM Mono',monospace;font-weight:700;color:#991b1b;">5</td>
                  <td style="padding:8px 4px;color:var(--ink);font-weight:700;">Net VAT to pay to HMRC</td>
                  <td style="padding:8px 4px;text-align:right;font-family:'DM Mono',monospace;font-weight:700;color:#991b1b;">Â£3,576.40</td>
                </tr>
                <tr style="border-bottom:1px solid var(--border);">
                  <td style="padding:8px 4px;font-family:'DM Mono',monospace;font-weight:700;color:#2c4a7c;">6</td>
                  <td style="padding:8px 4px;color:var(--ink2);">Total value of sales excl. VAT</td>
                  <td style="padding:8px 4px;text-align:right;font-family:'DM Mono',monospace;font-weight:600;">Â£24,100.00</td>
                </tr>
                <tr style="border-bottom:1px solid var(--border);">
                  <td style="padding:8px 4px;font-family:'DM Mono',monospace;font-weight:700;color:#2c4a7c;">7</td>
                  <td style="padding:8px 4px;color:var(--ink2);">Total value of purchases excl. VAT</td>
                  <td style="padding:8px 4px;text-align:right;font-family:'DM Mono',monospace;font-weight:600;">Â£6,218.00</td>
                </tr>
                <tr style="border-bottom:1px solid var(--border);">
                  <td style="padding:8px 4px;font-family:'DM Mono',monospace;font-weight:700;color:#2c4a7c;">8</td>
                  <td style="padding:8px 4px;color:var(--ink2);">Total supplies to EU excl. VAT</td>
                  <td style="padding:8px 4px;text-align:right;font-family:'DM Mono',monospace;font-weight:600;">Â£0.00</td>
                </tr>
                <tr>
                  <td style="padding:8px 4px;font-family:'DM Mono',monospace;font-weight:700;color:#2c4a7c;">9</td>
                  <td style="padding:8px 4px;color:var(--ink2);">Total acquisitions from EU excl. VAT</td>
                  <td style="padding:8px 4px;text-align:right;font-family:'DM Mono',monospace;font-weight:600;">Â£0.00</td>
                </tr>
              </tbody>
            </table>
            <div style="margin-top:14px;display:flex;gap:8px;">
              <button class="btn btn-primary" style="flex:1;" onclick="showToast('ğŸ“¤ Submitting VAT return to HMRC via MTD...')">Submit to HMRC (MTD)</button>
              <button class="btn btn-ghost" onclick="showToast('ğŸ“„ VAT return exported as PDF')">Export PDF</button>
            </div>
          </div>
        </div>

        <!-- VAT breakdown detail -->
        <div style="display:flex;flex-direction:column;gap:16px;">
          <div class="card">
            <div class="card-header">
              <div class="card-icon" style="background:var(--blue-light);">â–¦</div>
              <div><div class="card-title">Output VAT Detail</div><div class="card-sub">Sales by VAT rate â€” Q4 2025</div></div>
            </div>
            <div class="card-body">
              <div style="display:flex;justify-content:space-between;padding:7px 0;border-bottom:1px solid var(--border);font-size:12px;">
                <div style="color:var(--ink2);">Standard Rate (20%)</div>
                <div style="font-family:'DM Mono',monospace;font-weight:600;">Â£24,100.00 â†’ <span style="color:#2c4a7c;">Â£4,820.00</span></div>
              </div>
              <div style="display:flex;justify-content:space-between;padding:7px 0;border-bottom:1px solid var(--border);font-size:12px;">
                <div style="color:var(--ink2);">Reduced Rate (5%)</div>
                <div style="font-family:'DM Mono',monospace;font-weight:600;">Â£0.00 â†’ <span style="color:#2c4a7c;">Â£0.00</span></div>
              </div>
              <div style="display:flex;justify-content:space-between;padding:7px 0;font-size:12px;">
                <div style="color:var(--ink2);">Zero Rated (0%)</div>
                <div style="font-family:'DM Mono',monospace;font-weight:600;">Â£0.00 â†’ <span style="color:#2c4a7c;">Â£0.00</span></div>
              </div>
            </div>
          </div>
          <div class="card">
            <div class="card-header">
              <div class="card-icon" style="background:var(--green-light);">â–¦</div>
              <div><div class="card-title">Input VAT Detail</div><div class="card-sub">Reclaimable purchases â€” Q4 2025</div></div>
            </div>
            <div class="card-body">
              <div style="display:flex;justify-content:space-between;align-items:center;padding:7px 0;border-bottom:1px solid var(--border);font-size:12px;">
                <div><div style="font-weight:600;color:var(--ink);">Software & Subscriptions</div><div style="font-size:10px;font-family:'DM Mono',monospace;color:var(--ink3);">M365, Claude, Adobe</div></div>
                <div style="font-family:'DM Mono',monospace;font-weight:600;color:#166534;">Â£87.40</div>
              </div>
              <div style="display:flex;justify-content:space-between;align-items:center;padding:7px 0;border-bottom:1px solid var(--border);font-size:12px;">
                <div><div style="font-weight:600;color:var(--ink);">Office & Equipment</div><div style="font-size:10px;font-family:'DM Mono',monospace;color:var(--ink3);">Hardware, peripherals</div></div>
                <div style="font-family:'DM Mono',monospace;font-weight:600;color:#166534;">Â£624.00</div>
              </div>
              <div style="display:flex;justify-content:space-between;align-items:center;padding:7px 0;border-bottom:1px solid var(--border);font-size:12px;">
                <div><div style="font-weight:600;color:var(--ink);">Professional Services</div><div style="font-size:10px;font-family:'DM Mono',monospace;color:var(--ink3);">Accountancy, legal</div></div>
                <div style="font-family:'DM Mono',monospace;font-weight:600;color:#166534;">Â£360.00</div>
              </div>
              <div style="display:flex;justify-content:space-between;align-items:center;padding:7px 0;font-size:12px;">
                <div><div style="font-weight:600;color:var(--ink);">Travel & Transport</div><div style="font-size:10px;font-family:'DM Mono',monospace;color:var(--ink3);">Rail, fuel, parking</div></div>
                <div style="font-family:'DM Mono',monospace;font-weight:600;color:#166534;">Â£172.20</div>
              </div>
              <div style="border-top:2px solid var(--border);margin-top:6px;padding-top:8px;display:flex;justify-content:space-between;font-size:13px;font-weight:700;">
                <div>Total Input VAT</div>
                <div style="font-family:'DM Mono',monospace;color:#166534;">Â£1,243.60</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- TAX RETURN VIEW -->
    <div class="content" id="view-tax">
      <div class="stat-row" style="grid-template-columns:repeat(4,1fr);">
        <div class="stat-card" style="border-left:3px solid #2c4a7c;">
          <div class="stat-label">Total Income</div>
          <div class="stat-value" style="font-size:20px;margin-top:6px;">Â£42,800.00</div>
          <div class="stat-change" style="color:var(--ink3);">All sources 2024/25</div>
        </div>
        <div class="stat-card" style="border-left:3px solid #10b981;">
          <div class="stat-label">Allowable Expenses</div>
          <div class="stat-value" style="font-size:20px;margin-top:6px;">Â£8,340.00</div>
          <div class="stat-change" style="color:var(--green);">Deducted from income</div>
        </div>
        <div class="stat-card" style="border-left:3px solid #ef4444;">
          <div class="stat-label">Tax Owed</div>
          <div class="stat-value" style="font-size:20px;margin-top:6px;">Â£6,182.40</div>
          <div class="stat-change" style="color:var(--red);">Inc. NI contributions</div>
        </div>
        <div class="stat-card" style="border-left:3px solid var(--amber);">
          <div class="stat-label">Payments on Account</div>
          <div class="stat-value" style="font-size:20px;margin-top:6px;">Â£3,091.20</div>
          <div class="stat-change" style="color:var(--amber);">Due 31 Jan + 31 Jul</div>
        </div>
      </div>

      <div style="display:grid;grid-template-columns:1.3fr 1fr;gap:16px;">

        <!-- SA100 Form -->
        <div class="card">
          <div class="card-header">
            <div class="card-icon" style="background:#d0ddf5;">â—¨</div>
            <div><div class="card-title">Self Assessment â€” SA100</div><div class="card-sub">Tax year 6 Apr 2024 â€“ 5 Apr 2025 Â· HMRC reference: UTR 1234567890</div></div>
            <span style="font-size:9px;font-family:'DM Mono',monospace;background:var(--amber-light);color:var(--amber);padding:3px 8px;border-radius:4px;margin-left:auto;">DRAFT</span>
          </div>
          <div class="card-body">
            <!-- Income section -->
            <div style="font-size:10px;font-family:'DM Mono',monospace;color:var(--ink3);letter-spacing:1px;margin-bottom:8px;padding-bottom:6px;border-bottom:1px solid var(--border);">INCOME</div>
            <table style="width:100%;border-collapse:collapse;font-size:12px;margin-bottom:16px;">
              <tr style="border-bottom:1px solid var(--border);">
                <td style="padding:7px 4px;color:var(--ink2);">Employment income (P60)</td>
                <td style="padding:7px 4px;text-align:right;font-family:'DM Mono',monospace;font-weight:600;">Â£28,500.00</td>
              </tr>
              <tr style="border-bottom:1px solid var(--border);">
                <td style="padding:7px 4px;color:var(--ink2);">Self-employment / freelance income</td>
                <td style="padding:7px 4px;text-align:right;font-family:'DM Mono',monospace;font-weight:600;">Â£12,300.00</td>
              </tr>
              <tr style="border-bottom:1px solid var(--border);">
                <td style="padding:7px 4px;color:var(--ink2);">Dividends received</td>
                <td style="padding:7px 4px;text-align:right;font-family:'DM Mono',monospace;font-weight:600;">Â£1,200.00</td>
              </tr>
              <tr style="border-bottom:1px solid var(--border);">
                <td style="padding:7px 4px;color:var(--ink2);">Savings interest</td>
                <td style="padding:7px 4px;text-align:right;font-family:'DM Mono',monospace;font-weight:600;">Â£800.00</td>
              </tr>
              <tr style="border-bottom:2px solid var(--border);">
                <td style="padding:7px 4px;font-weight:700;color:var(--ink);">Total Income</td>
                <td style="padding:7px 4px;text-align:right;font-family:'DM Mono',monospace;font-weight:700;">Â£42,800.00</td>
              </tr>
            </table>
            <!-- Deductions -->
            <div style="font-size:10px;font-family:'DM Mono',monospace;color:var(--ink3);letter-spacing:1px;margin-bottom:8px;padding-bottom:6px;border-bottom:1px solid var(--border);">ALLOWABLE DEDUCTIONS</div>
            <table style="width:100%;border-collapse:collapse;font-size:12px;margin-bottom:16px;">
              <tr style="border-bottom:1px solid var(--border);">
                <td style="padding:7px 4px;color:var(--ink2);">Personal allowance</td>
                <td style="padding:7px 4px;text-align:right;font-family:'DM Mono',monospace;font-weight:600;color:#166534;">âˆ’Â£12,570.00</td>
              </tr>
              <tr style="border-bottom:1px solid var(--border);">
                <td style="padding:7px 4px;color:var(--ink2);">Business expenses (SE income)</td>
                <td style="padding:7px 4px;text-align:right;font-family:'DM Mono',monospace;font-weight:600;color:#166534;">âˆ’Â£4,200.00</td>
              </tr>
              <tr style="border-bottom:1px solid var(--border);">
                <td style="padding:7px 4px;color:var(--ink2);">Pension contributions</td>
                <td style="padding:7px 4px;text-align:right;font-family:'DM Mono',monospace;font-weight:600;color:#166534;">âˆ’Â£2,400.00</td>
              </tr>
              <tr style="border-bottom:1px solid var(--border);">
                <td style="padding:7px 4px;color:var(--ink2);">Gift Aid donations</td>
                <td style="padding:7px 4px;text-align:right;font-family:'DM Mono',monospace;font-weight:600;color:#166534;">âˆ’Â£480.00</td>
              </tr>
              <tr style="border-bottom:2px solid var(--border);">
                <td style="padding:7px 4px;color:var(--ink2);">Dividend allowance</td>
                <td style="padding:7px 4px;text-align:right;font-family:'DM Mono',monospace;font-weight:600;color:#166534;">âˆ’Â£500.00</td>
              </tr>
              <tr>
                <td style="padding:7px 4px;font-weight:700;color:var(--ink);">Taxable Income</td>
                <td style="padding:7px 4px;text-align:right;font-family:'DM Mono',monospace;font-weight:700;">Â£22,650.00</td>
              </tr>
            </table>
            <!-- Tax Calculation -->
            <div style="font-size:10px;font-family:'DM Mono',monospace;color:var(--ink3);letter-spacing:1px;margin-bottom:8px;padding-bottom:6px;border-bottom:1px solid var(--border);">TAX CALCULATION</div>
            <table style="width:100%;border-collapse:collapse;font-size:12px;">
              <tr style="border-bottom:1px solid var(--border);">
                <td style="padding:7px 4px;color:var(--ink2);">Basic rate tax (20%) on Â£22,650</td>
                <td style="padding:7px 4px;text-align:right;font-family:'DM Mono',monospace;font-weight:600;">Â£4,530.00</td>
              </tr>
              <tr style="border-bottom:1px solid var(--border);">
                <td style="padding:7px 4px;color:var(--ink2);">Tax deducted at source (PAYE)</td>
                <td style="padding:7px 4px;text-align:right;font-family:'DM Mono',monospace;font-weight:600;color:#166534;">âˆ’Â£2,340.00</td>
              </tr>
              <tr style="border-bottom:1px solid var(--border);">
                <td style="padding:7px 4px;color:var(--ink2);">Class 4 NI (9% on Â£12,300 SE profit)</td>
                <td style="padding:7px 4px;text-align:right;font-family:'DM Mono',monospace;font-weight:600;">Â£1,107.00</td>
              </tr>
              <tr style="border-bottom:1px solid var(--border);">
                <td style="padding:7px 4px;color:var(--ink2);">Class 2 NI contributions</td>
                <td style="padding:7px 4px;text-align:right;font-family:'DM Mono',monospace;font-weight:600;">Â£179.40</td>
              </tr>
              <tr style="border-bottom:1px solid var(--border);">
                <td style="padding:7px 4px;color:var(--ink2);">Dividend tax (8.75% on Â£700)</td>
                <td style="padding:7px 4px;text-align:right;font-family:'DM Mono',monospace;font-weight:600;">Â£61.25</td>
              </tr>
              <tr style="border-bottom:1px solid var(--border);">
                <td style="padding:7px 4px;color:var(--ink2);">Savings income tax (20%)</td>
                <td style="padding:7px 4px;text-align:right;font-family:'DM Mono',monospace;font-weight:600;">Â£0.00</td>
              </tr>
              <tr style="border-top:2px solid var(--border);background:rgba(239,68,68,0.04);">
                <td style="padding:9px 4px;font-weight:700;color:var(--ink);font-size:13px;">Total Tax &amp; NI Owed</td>
                <td style="padding:9px 4px;text-align:right;font-family:'DM Mono',monospace;font-weight:700;font-size:14px;color:#991b1b;">Â£6,182.40</td>
              </tr>
            </table>
            <div style="margin-top:14px;display:flex;gap:8px;">
              <button class="btn btn-primary" style="flex:1;" onclick="showToast('ğŸ“¤ Submitting Self Assessment to HMRC...')">Submit to HMRC</button>
              <button class="btn btn-ghost" onclick="showToast('ğŸ“„ SA100 exported as PDF')">Export PDF</button>
              <button class="btn btn-ghost" onclick="showToast('ğŸ“Š Report exported to Excel')">Export XLS</button>
            </div>
          </div>
        </div>

        <!-- Right column -->
        <div style="display:flex;flex-direction:column;gap:16px;">

          <!-- Tax timeline -->
          <div class="card">
            <div class="card-header">
              <div class="card-icon" style="background:var(--amber-light);">â±</div>
              <div><div class="card-title">Key Deadlines</div><div class="card-sub">2024/25 tax year</div></div>
            </div>
            <div class="card-body">
              <div style="display:flex;gap:12px;align-items:flex-start;padding:8px 0;border-bottom:1px solid var(--border);">
                <div style="width:3px;height:36px;background:#991b1b;border-radius:2px;flex-shrink:0;margin-top:2px;"></div>
                <div><div style="font-size:12px;font-weight:700;color:#991b1b;">31 Jan 2026 â€” OVERDUE</div><div style="font-size:10px;font-family:'DM Mono',monospace;color:var(--ink3);">Online SA submission + balancing payment</div></div>
              </div>
              <div style="display:flex;gap:12px;align-items:flex-start;padding:8px 0;border-bottom:1px solid var(--border);">
                <div style="width:3px;height:36px;background:var(--amber);border-radius:2px;flex-shrink:0;margin-top:2px;"></div>
                <div><div style="font-size:12px;font-weight:700;color:var(--amber);">31 Jan 2026 â€” OVERDUE</div><div style="font-size:10px;font-family:'DM Mono',monospace;color:var(--ink3);">1st payment on account: Â£3,091.20</div></div>
              </div>
              <div style="display:flex;gap:12px;align-items:flex-start;padding:8px 0;">
                <div style="width:3px;height:36px;background:#2c4a7c;border-radius:2px;flex-shrink:0;margin-top:2px;"></div>
                <div><div style="font-size:12px;font-weight:700;color:#2c4a7c;">31 Jul 2026</div><div style="font-size:10px;font-family:'DM Mono',monospace;color:var(--ink3);">2nd payment on account: Â£3,091.20</div></div>
              </div>
            </div>
          </div>

          <!-- Expenses breakdown -->
          <div class="card">
            <div class="card-header">
              <div class="card-icon" style="background:var(--green-light);">Â£</div>
              <div><div class="card-title">Allowable Expenses</div><div class="card-sub">Auto-matched from transactions</div></div>
            </div>
            <div class="card-body">
              <div style="display:flex;justify-content:space-between;align-items:center;padding:6px 0;border-bottom:1px solid var(--border);font-size:12px;">
                <div><div style="font-weight:600;color:var(--ink);">Software & Tools</div><div style="font-size:10px;font-family:'DM Mono',monospace;color:var(--ink3);">Claude, VS Code, M365</div></div>
                <div style="font-family:'DM Mono',monospace;font-weight:600;color:#166534;">Â£648.00</div>
              </div>
              <div style="display:flex;justify-content:space-between;align-items:center;padding:6px 0;border-bottom:1px solid var(--border);font-size:12px;">
                <div><div style="font-weight:600;color:var(--ink);">Home Office (25%)</div><div style="font-size:10px;font-family:'DM Mono',monospace;color:var(--ink3);">Utilities, broadband</div></div>
                <div style="font-family:'DM Mono',monospace;font-weight:600;color:#166534;">Â£960.00</div>
              </div>
              <div style="display:flex;justify-content:space-between;align-items:center;padding:6px 0;border-bottom:1px solid var(--border);font-size:12px;">
                <div><div style="font-weight:600;color:var(--ink);">Professional Development</div><div style="font-size:10px;font-family:'DM Mono',monospace;color:var(--ink3);">AAT course, books</div></div>
                <div style="font-family:'DM Mono',monospace;font-weight:600;color:#166534;">Â£1,200.00</div>
              </div>
              <div style="display:flex;justify-content:space-between;align-items:center;padding:6px 0;border-bottom:1px solid var(--border);font-size:12px;">
                <div><div style="font-weight:600;color:var(--ink);">Travel (business)</div><div style="font-size:10px;font-family:'DM Mono',monospace;color:var(--ink3);">Rail, LNER receipts</div></div>
                <div style="font-family:'DM Mono',monospace;font-weight:600;color:#166534;">Â£892.00</div>
              </div>
              <div style="display:flex;justify-content:space-between;align-items:center;padding:6px 0;font-size:12px;">
                <div><div style="font-weight:600;color:var(--ink);">Equipment & Hardware</div><div style="font-size:10px;font-family:'DM Mono',monospace;color:var(--ink3);">GPU cable, peripherals</div></div>
                <div style="font-family:'DM Mono',monospace;font-weight:600;color:#166534;">Â£500.00</div>
              </div>
              <div style="border-top:2px solid var(--border);margin-top:6px;padding-top:8px;display:flex;justify-content:space-between;font-size:13px;font-weight:700;">
                <div>Total Expenses</div>
                <div style="font-family:'DM Mono',monospace;color:#166534;">Â£4,200.00</div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>

    <!-- INVENTORY VIEW -->
    <div class="content" id="view-inventory">
      <div class="card">
        <div class="card-header">
          <div class="card-icon" style="background:var(--green-light);">âŠŸ</div>
          <div>
            <div class="card-title">Food & Drink Inventory</div>
            <div class="card-sub">Updated from receipt scans Â· 1 item low</div>
          </div>
          <button class="btn btn-primary" style="margin-left:auto;" onclick="showToast('ğŸ“„ Upload receipt to scan inventory')">Scan Receipt</button>
        </div>
        <div class="card-body">
          <div class="inventory-item"><div class="inv-emoji">ğŸ¥›</div><div class="inv-name">Milk</div><div class="inv-qty">1 jug</div><div class="stock-bar"><div class="stock-fill" style="width:12%;background:#ef4444;"></div></div><div class="status-pill status-alert" style="margin-left:8px;">Low</div></div>
          <div class="inventory-item"><div class="inv-emoji">ğŸ</div><div class="inv-name">Bread</div><div class="inv-qty">1 loaf</div><div class="stock-bar"><div class="stock-fill" style="width:35%;background:#f59e0b;"></div></div></div>
          <div class="inventory-item"><div class="inv-emoji">ğŸ¥š</div><div class="inv-name">Eggs</div><div class="inv-qty">8</div><div class="stock-bar"><div class="stock-fill" style="width:65%;background:#10b981;"></div></div></div>
          <div class="inventory-item"><div class="inv-emoji">â˜•</div><div class="inv-name">Coffee Beans</div><div class="inv-qty">250g</div><div class="stock-bar"><div class="stock-fill" style="width:80%;background:#10b981;"></div></div></div>
          <div class="inventory-item"><div class="inv-emoji">ğŸš</div><div class="inv-name">Rice</div><div class="inv-qty">500g</div><div class="stock-bar"><div class="stock-fill" style="width:50%;background:#3b82f6;"></div></div></div>
          <div class="inventory-item"><div class="inv-emoji">ğŸ«’</div><div class="inv-name">Olive Oil</div><div class="inv-qty">400ml</div><div class="stock-bar"><div class="stock-fill" style="width:70%;background:#10b981;"></div></div></div>
          <div class="inventory-item"><div class="inv-emoji">ğŸ§„</div><div class="inv-name">Garlic</div><div class="inv-qty">4 cloves</div><div class="stock-bar"><div class="stock-fill" style="width:30%;background:#f59e0b;"></div></div></div>
        </div>
      </div>
    </div>

    <!-- MEALS VIEW -->
    <div class="content" id="view-meals">
      <div class="card">
        <div class="card-header">
          <div class="card-icon" style="background:var(--green-light);">âŠ•</div>
          <div>
            <div class="card-title">Meal Plan â€” This Week</div>
            <div class="card-sub">Generated by Claude Â· Based on your inventory & taste profile</div>
          </div>
          <button class="btn btn-primary" style="margin-left:auto;" onclick="showToast('ğŸ¤– Claude is generating a new meal plan...')">Regenerate</button>
        </div>
        <div class="card-body">
          <div class="meal-card"><div class="meal-emoji">ğŸœ</div><div class="meal-info"><div class="meal-name">Garlic Egg Fried Rice</div><div class="meal-macros">Est. 520 kcal Â· Uses: rice, eggs, garlic, olive oil</div></div><div class="meal-day">Mon</div></div>
          <div class="meal-card"><div class="meal-emoji">ğŸ¥—</div><div class="meal-info"><div class="meal-name">Avocado Toast with Eggs</div><div class="meal-macros">Est. 380 kcal Â· Uses: bread, eggs</div></div><div class="meal-day">Tue</div></div>
          <div class="meal-card"><div class="meal-emoji">ğŸ</div><div class="meal-info"><div class="meal-name">Spaghetti Aglio e Olio</div><div class="meal-macros">Est. 610 kcal Â· Uses: pasta, garlic, olive oil</div></div><div class="meal-day">Wed</div></div>
          <div class="meal-card"><div class="meal-emoji">ğŸ›</div><div class="meal-info"><div class="meal-name">Simple Rice Bowl</div><div class="meal-macros">Est. 480 kcal Â· Uses: rice, eggs</div></div><div class="meal-day">Thu</div></div>
        </div>
      </div>
    </div>

    <!-- TRIPS VIEW -->
    <div class="content" id="view-trips">
      <div class="card" style="margin-bottom:16px;">
        <div class="card-header">
          <div class="card-icon" style="background:var(--blue-light);">â—</div>
          <div>
            <div class="card-title">Suggested Destinations</div>
            <div class="card-sub">Based on your taste profile & interests</div>
          </div>
          <button class="btn btn-primary" style="margin-left:auto;" onclick="openTripPlanner()">Plan New Trip</button>
        </div>
        <div class="card-body">
          <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;">
            <div class="trip-card" style="margin-bottom:0;"><div class="trip-img">ğŸ—¼</div><div class="trip-info"><div class="trip-name">Paris, France</div><div class="trip-dates">Suggested Â· Based on your travel profile</div></div></div>
            <div class="trip-card" style="margin-bottom:0;"><div class="trip-img">ğŸ—¾</div><div class="trip-info"><div class="trip-name">Tokyo, Japan</div><div class="trip-dates">Suggested Â· Asian cuisine interest</div></div></div>
            <div class="trip-card" style="margin-bottom:0;cursor:pointer;" onclick="openTripPlanner()">
              <div class="trip-img">ğŸŒ†</div>
              <div class="trip-info">
                <div class="trip-name">New York, USA</div>
                <div class="trip-dates" style="color:#2c4a7c;font-weight:700;">âœ¦ Click to plan this trip</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="card-header">
          <div class="card-icon" style="background:var(--blue-light);">âœˆ</div>
          <div>
            <div class="card-title">Upcoming â€” Glastonbury 2026</div>
            <div class="card-sub">25â€“29 June 2026 Â· Somerset, UK</div>
          </div>
        </div>
        <div class="card-body">
          <div class="event-item"><div class="event-time-col"><div class="event-time">25 Jun</div><div class="event-bar" style="background:#3b82f6;"></div></div><div class="event-info"><div class="event-name">Depart â€” LNER London to Somerset</div><div class="event-detail">08:45 Â· Kings Cross Â· Booked</div></div></div>
          <div class="event-item"><div class="event-time-col"><div class="event-time">25 Jun</div><div class="event-bar" style="background:#10b981;"></div></div><div class="event-info"><div class="event-name">Check in â€” Worthy Farm Camping</div><div class="event-detail">From 12:00 Â· GA Ticket in Wallet</div></div></div>
          <div class="event-item"><div class="event-time-col"><div class="event-time">29 Jun</div><div class="event-bar" style="background:#f59e0b;"></div></div><div class="event-info"><div class="event-name">Depart â€” Return to London</div><div class="event-detail">16:00 Â· Castle Cary station</div></div></div>
        </div>
      </div>
    </div>

    <!-- PARCELS VIEW -->
    <div class="content" id="view-parcels">
      <div class="card">
        <div class="card-header">
          <div class="card-icon" style="background:var(--amber-light);">âŠ¡</div>
          <div>
            <div class="card-title">Parcel Tracking</div>
            <div class="card-sub">Auto-detected from emails Â· AfterShip</div>
          </div>
          <button class="btn btn-primary" style="margin-left:auto;" onclick="showToast('ğŸ“¦ Enter tracking number')">Add Tracking</button>
        </div>
        <div class="card-body">
          <div class="parcel-item"><div class="parcel-icon">ğŸ“¦</div><div class="parcel-info"><div class="parcel-name">ASOS Order #28291 â€” Clothing</div><div class="parcel-courier">Evri Â· EVR-28291-UK Â· Est. today by 6PM</div></div><div class="status-pill status-transit">Out for delivery</div></div>
          <div class="parcel-item"><div class="parcel-icon">ğŸ“¦</div><div class="parcel-info"><div class="parcel-name">Amazon â€” GPU Power Cable</div><div class="parcel-courier">Royal Mail Â· RM-774821-GB Â· Est. Mon 2 Mar</div></div><div class="status-pill status-processing">In transit</div></div>
        </div>
      </div>
    </div>

    <!-- CALENDAR VIEW -->
    <div class="content" id="view-calendar">
      <div style="display:grid; grid-template-columns:1fr 1.4fr; gap:16px;">
        <div class="card">
          <div class="card-header"><div class="card-icon" style="background:var(--blue-light);">â—«</div><div><div class="card-title">February 2026</div></div></div>
          <div class="card-body">
            <div class="calendar-grid">
              <div class="cal-day-label">M</div><div class="cal-day-label">T</div><div class="cal-day-label">W</div><div class="cal-day-label">T</div><div class="cal-day-label">F</div><div class="cal-day-label">S</div><div class="cal-day-label">S</div>
              <div class="cal-day other-month">27</div><div class="cal-day other-month">28</div><div class="cal-day other-month">29</div><div class="cal-day other-month">30</div><div class="cal-day other-month">31</div><div class="cal-day">1</div><div class="cal-day">2</div>
              <div class="cal-day">3</div><div class="cal-day">4</div><div class="cal-day has-event">5</div><div class="cal-day">6</div><div class="cal-day">7</div><div class="cal-day">8</div><div class="cal-day">9</div>
              <div class="cal-day">10</div><div class="cal-day has-event">11</div><div class="cal-day">12</div><div class="cal-day">13</div><div class="cal-day">14</div><div class="cal-day">15</div><div class="cal-day">16</div>
              <div class="cal-day">17</div><div class="cal-day">18</div><div class="cal-day">19</div><div class="cal-day">20</div><div class="cal-day">21</div><div class="cal-day">22</div><div class="cal-day">23</div>
              <div class="cal-day">24</div><div class="cal-day">25</div><div class="cal-day">26</div><div class="cal-day">27</div><div class="cal-day today has-event">28</div><div class="cal-day other-month">1</div><div class="cal-day other-month">2</div>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-header"><div class="card-icon" style="background:var(--purple-light);">â—«</div><div><div class="card-title">Upcoming Events</div><div class="card-sub">From emails, calls & manual</div></div></div>
          <div class="card-body">
            <div class="event-item"><div class="event-time-col"><div class="event-time">Today</div><div class="event-bar" style="background:#2c4a7c;"></div></div><div class="event-info"><div class="event-name">ASOS Delivery Expected</div><div class="event-detail">Evri Â· by 6PM Â· No action needed</div></div></div>
            <div class="event-item"><div class="event-time-col"><div class="event-time">Mon 2</div><div class="event-bar" style="background:#7c3aed;"></div></div><div class="event-info"><div class="event-name">GP Appointment â€” Dr. Smith</div><div class="event-detail">10:30 AM Â· Booked from voicemail</div></div></div>
            <div class="event-item"><div class="event-time-col"><div class="event-time">15 Mar</div><div class="event-bar" style="background:#0284c7;"></div></div><div class="event-info"><div class="event-name">LNER â€” London to Somerset</div><div class="event-detail">08:45 Â· Ticket in Wallet</div></div></div>
            <div class="event-item"><div class="event-time-col"><div class="event-time">25 Jun</div><div class="event-bar" style="background:#10b981;"></div></div><div class="event-info"><div class="event-name">Glastonbury Festival 2026</div><div class="event-detail">Worthy Farm Â· Ticket in Wallet Â· 5 days</div></div></div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- Mobile Drawer Overlay -->
<div class="mobile-drawer-overlay" id="drawer-overlay" onclick="toggleDrawer()"></div>

<!-- Mobile Drawer (full nav) -->
<div class="mobile-drawer" id="mobile-drawer">
  <div class="sidebar-brand">
    <div class="brand-name">ANN</div>
    <div class="brand-sub">Personal Assistant</div>
  </div>
  <div class="sidebar-nav">
    <div class="nav-section-label">Overview</div>
    <div class="nav-item" onclick="navigateMobile('dashboard', this)"><span class="nav-icon">âŠ</span> Dashboard</div>
    <div class="nav-item" onclick="navigateMobile('calendar', this)"><span class="nav-icon">â—«</span> Calendar<span class="nav-badge">3</span></div>
    <div class="nav-item" onclick="navigateMobile('tasks', this)"><span class="nav-icon">âœ“</span> Tasks<span class="nav-badge">5</span></div>
    <div class="nav-section-label">Communications</div>
    <div class="nav-item" onclick="navigateMobile('emails', this)"><span class="nav-icon">âœ‰</span> Emails<span class="nav-badge">4</span></div>
    <div class="nav-item" onclick="navigateMobile('calls', this)"><span class="nav-icon">â˜</span> Calls</div>
    <div class="nav-item" onclick="navigateMobile('wallet', this)"><span class="nav-icon">â—ˆ</span> Wallet</div>
    <div class="nav-section-label">Finance</div>
    <div class="nav-item" onclick="navigateMobile('budget', this)"><span class="nav-icon">â—‰</span> Budget</div>
    <div class="nav-item" onclick="navigateMobile('bills', this)"><span class="nav-icon">âš‘</span> Bills<span class="nav-badge" style="background:var(--red)">!</span></div>
    <div class="nav-item" onclick="navigateMobile('categorisation', this)"><span class="nav-icon">âŠ›</span> Categorisation</div>
    <div class="nav-item" onclick="navigateMobile('vat', this)"><span class="nav-icon">â—§</span> VAT Return</div>
    <div class="nav-item" onclick="navigateMobile('tax', this)"><span class="nav-icon">â—¨</span> Tax Return</div>
    <div class="nav-section-label">Lifestyle</div>
    <div class="nav-item" onclick="navigateMobile('inventory', this)"><span class="nav-icon">âŠŸ</span> Inventory</div>
    <div class="nav-item" onclick="navigateMobile('meals', this)"><span class="nav-icon">âŠ•</span> Meals</div>
    <div class="nav-item" onclick="navigateMobile('trips', this)"><span class="nav-icon">â—</span> Trips</div>
    <div class="nav-item" onclick="navigateMobile('parcels', this)"><span class="nav-icon">âŠ¡</span> Parcels<span class="nav-badge">2</span></div>
  </div>
  <div class="sidebar-profile">
    <div class="profile-avatar">O</div>
    <div>
      <div class="profile-name">Overwatch</div>
      <div class="profile-role">Personal Â· Work</div>
    </div>
  </div>
</div>

<!-- Mobile Bottom Nav -->
<nav class="mobile-nav">
  <div class="mobile-nav-inner">
    <div class="mobile-nav-btn active" id="mnav-dashboard" onclick="navigateMobileBottom('dashboard', this)">
      <span class="mobile-nav-icon">âŠ</span>
      <span>Home</span>
    </div>
    <div class="mobile-nav-btn" id="mnav-emails" onclick="navigateMobileBottom('emails', this)">
      <span class="mobile-nav-icon">âœ‰</span>
      <span>Emails</span>
      <div class="mobile-nav-badge">4</div>
    </div>
    <div class="mobile-nav-btn" id="mnav-budget" onclick="navigateMobileBottom('budget', this)">
      <span class="mobile-nav-icon">â—‰</span>
      <span>Budget</span>
    </div>
    <div class="mobile-nav-btn" id="mnav-tasks" onclick="navigateMobileBottom('tasks', this)">
      <span class="mobile-nav-icon">âœ“</span>
      <span>Tasks</span>
      <div class="mobile-nav-badge">5</div>
    </div>
    <div class="mobile-nav-btn" id="mnav-more" onclick="toggleDrawer()">
      <span class="mobile-nav-icon">â˜°</span>
      <span>More</span>
    </div>
  </div>
</nav>

<!-- Toast -->
<div class="toast" id="toast"></div>

<!-- Trip Planner Modal -->
<div class="trip-modal-overlay" id="trip-modal-overlay" onclick="closeTripPlannerOverlay(event)">
  <div class="trip-modal" onclick="event.stopPropagation()">

    <!-- Hero -->
    <div class="trip-modal-hero">
      <button class="trip-modal-close-btn" onclick="closeTripPlanner()">âœ•</button>
      <div class="trip-modal-hero-text">
        <h2>New York City</h2>
        <p>TRIP PLANNER Â· POWERED BY ANN AI</p>
      </div>
    </div>

    <!-- Step indicator -->
    <div class="trip-steps" id="trip-steps">
      <div class="trip-step">
        <div class="trip-step-dot active" id="step-dot-1">1</div>
        <div class="trip-step-label active" id="step-label-1">Dates</div>
      </div>
      <div class="trip-step-line" id="step-line-1"></div>
      <div class="trip-step">
        <div class="trip-step-dot" id="step-dot-2">2</div>
        <div class="trip-step-label" id="step-label-2">Flights</div>
      </div>
      <div class="trip-step-line" id="step-line-2"></div>
      <div class="trip-step">
        <div class="trip-step-dot" id="step-dot-3">3</div>
        <div class="trip-step-label" id="step-label-3">Hotel</div>
      </div>
      <div class="trip-step-line" id="step-line-3"></div>
      <div class="trip-step">
        <div class="trip-step-dot" id="step-dot-4">4</div>
        <div class="trip-step-label" id="step-label-4">Itinerary</div>
      </div>
      <div class="trip-step-line" id="step-line-4"></div>
      <div class="trip-step">
        <div class="trip-step-dot" id="step-dot-5">5</div>
        <div class="trip-step-label" id="step-label-5">Confirm</div>
      </div>
    </div>

    <!-- Panel 1: Dates & Preferences -->
    <div class="trip-panel active" id="trip-panel-1">
      <div style="font-size:10px;font-family:'DM Mono',monospace;color:var(--ink3);letter-spacing:1px;margin-bottom:12px;">TRAVEL DATES</div>
      <div class="date-grid">
        <div class="date-field">
          <label>Departure</label>
          <input type="date" id="trip-depart" value="2026-06-10">
        </div>
        <div class="date-field">
          <label>Return</label>
          <input type="date" id="trip-return" value="2026-06-15">
        </div>
        <div class="date-field">
          <label>Travellers</label>
          <select id="trip-travellers">
            <option>1 Adult</option>
            <option>2 Adults</option>
            <option>3 Adults</option>
          </select>
        </div>
        <div class="date-field">
          <label>Class</label>
          <select id="trip-class">
            <option>Economy</option>
            <option>Premium Economy</option>
            <option>Business</option>
          </select>
        </div>
      </div>
      <div style="font-size:10px;font-family:'DM Mono',monospace;color:var(--ink3);letter-spacing:1px;margin-bottom:10px;margin-top:4px;">INTERESTS (from your profile)</div>
      <div class="pref-chips" id="pref-chips">
        <div class="pref-chip selected" onclick="toggleChip(this)">ğŸ“ˆ Finance & Business</div>
        <div class="pref-chip selected" onclick="toggleChip(this)">ğŸœ Asian Cuisine</div>
        <div class="pref-chip selected" onclick="toggleChip(this)">â˜• Coffee Shops</div>
        <div class="pref-chip selected" onclick="toggleChip(this)">ğŸ’» Tech Culture</div>
        <div class="pref-chip" onclick="toggleChip(this)">ğŸ¨ Art & Museums</div>
        <div class="pref-chip" onclick="toggleChip(this)">ğŸ™ Architecture</div>
        <div class="pref-chip" onclick="toggleChip(this)">ğŸ­ Broadway</div>
        <div class="pref-chip" onclick="toggleChip(this)">ğŸ‹ï¸ Fitness</div>
      </div>
      <div style="padding:12px 14px;background:var(--blue-light);border-radius:8px;font-size:11px;color:#1a3260;font-family:'DM Mono',monospace;line-height:1.5;">
        âœ¦ ANN will generate a personalised itinerary, flight options, and hotel suggestions based on your selections and taste profile.
      </div>
    </div>

    <!-- Panel 2: Flights -->
    <div class="trip-panel" id="trip-panel-2">
      <div style="font-size:10px;font-family:'DM Mono',monospace;color:var(--ink3);letter-spacing:1px;margin-bottom:14px;">AVAILABLE FLIGHTS Â· LHR â†’ JFK Â· 10 JUN 2026</div>

      <div class="flight-option selected" id="flight-1" onclick="selectFlight('flight-1')">
        <div>
          <div class="flight-airline">British Airways</div>
          <div style="font-size:9px;font-family:'DM Mono',monospace;color:var(--ink3);margin-top:2px;">BA 177 Â· Non-stop</div>
        </div>
        <div class="flight-times">
          <div class="flight-time">09:15</div>
          <div class="flight-route-line">
            <div class="flight-duration">7h 45m</div>
            <div class="flight-line"></div>
            <div style="font-size:9px;font-family:'DM Mono',monospace;color:var(--ink3);">LHR â†’ JFK</div>
          </div>
          <div class="flight-time">12:00</div>
        </div>
        <div>
          <div class="flight-price">Â£389</div>
          <div class="flight-price-sub">per person</div>
        </div>
      </div>

      <div class="flight-option" id="flight-2" onclick="selectFlight('flight-2')">
        <div>
          <div class="flight-airline">Virgin Atlantic</div>
          <div style="font-size:9px;font-family:'DM Mono',monospace;color:var(--ink3);margin-top:2px;">VS 3 Â· Non-stop</div>
        </div>
        <div class="flight-times">
          <div class="flight-time">11:30</div>
          <div class="flight-route-line">
            <div class="flight-duration">8h 05m</div>
            <div class="flight-line"></div>
            <div style="font-size:9px;font-family:'DM Mono',monospace;color:var(--ink3);">LHR â†’ JFK</div>
          </div>
          <div class="flight-time">14:35</div>
        </div>
        <div>
          <div class="flight-price">Â£342</div>
          <div class="flight-price-sub">per person</div>
        </div>
      </div>

      <div class="flight-option" id="flight-3" onclick="selectFlight('flight-3')">
        <div>
          <div class="flight-airline">American Airlines</div>
          <div style="font-size:9px;font-family:'DM Mono',monospace;color:var(--ink3);margin-top:2px;">AA 106 Â· 1 stop Â· ORD</div>
        </div>
        <div class="flight-times">
          <div class="flight-time">07:45</div>
          <div class="flight-route-line">
            <div class="flight-duration">11h 20m</div>
            <div class="flight-line"></div>
            <div style="font-size:9px;font-family:'DM Mono',monospace;color:var(--ink3);">LHR â†’ ORD â†’ JFK</div>
          </div>
          <div class="flight-time">13:05</div>
        </div>
        <div>
          <div class="flight-price">Â£274</div>
          <div class="flight-price-sub">per person</div>
        </div>
      </div>

      <div style="font-size:10px;font-family:'DM Mono',monospace;color:var(--ink3);margin-top:4px;">RETURN FLIGHT Â· JFK â†’ LHR Â· 15 JUN 2026</div>
      <div class="flight-option selected" style="margin-top:10px;" id="flight-r1" onclick="selectFlight('flight-r1')">
        <div>
          <div class="flight-airline">British Airways</div>
          <div style="font-size:9px;font-family:'DM Mono',monospace;color:var(--ink3);margin-top:2px;">BA 178 Â· Non-stop</div>
        </div>
        <div class="flight-times">
          <div class="flight-time">18:30</div>
          <div class="flight-route-line">
            <div class="flight-duration">6h 45m</div>
            <div class="flight-line"></div>
            <div style="font-size:9px;font-family:'DM Mono',monospace;color:var(--ink3);">JFK â†’ LHR</div>
          </div>
          <div class="flight-time">06:15+1</div>
        </div>
        <div>
          <div class="flight-price">Â£349</div>
          <div class="flight-price-sub">per person</div>
        </div>
      </div>
    </div>

    <!-- Panel 3: Hotels -->
    <div class="trip-panel" id="trip-panel-3">
      <div style="font-size:10px;font-family:'DM Mono',monospace;color:var(--ink3);letter-spacing:1px;margin-bottom:14px;">HOTELS Â· NEW YORK CITY Â· 5 NIGHTS</div>

      <div class="hotel-option selected" id="hotel-1" onclick="selectHotel('hotel-1')">
        <div class="hotel-img">ğŸ¨</div>
        <div class="hotel-info">
          <div class="hotel-name">The Manhattan at Times Square</div>
          <div class="hotel-location">Midtown Â· 0.3mi to Central Park Â· Free WiFi</div>
          <div class="hotel-stars">â˜…â˜…â˜…â˜…â˜† 4.2 Â· 1,840 reviews</div>
          <div style="font-size:10px;font-family:'DM Mono',monospace;color:var(--green);margin-top:3px;">âœ“ Gym Â· Rooftop bar Â· Business centre</div>
        </div>
        <div>
          <div class="hotel-price">Â£189</div>
          <div class="hotel-price-sub">per night</div>
          <div class="hotel-price-sub" style="color:var(--ink);font-weight:600;margin-top:4px;">Â£945 total</div>
        </div>
      </div>

      <div class="hotel-option" id="hotel-2" onclick="selectHotel('hotel-2')">
        <div class="hotel-img">ğŸ©</div>
        <div class="hotel-info">
          <div class="hotel-name">Ace Hotel Brooklyn</div>
          <div class="hotel-location">Williamsburg Â· Hip district Â· Near subway</div>
          <div class="hotel-stars">â˜…â˜…â˜…â˜…â˜… 4.7 Â· 920 reviews</div>
          <div style="font-size:10px;font-family:'DM Mono',monospace;color:var(--green);margin-top:3px;">âœ“ Rooftop pool Â· Coffee shop Â· Coworking</div>
        </div>
        <div>
          <div class="hotel-price">Â£224</div>
          <div class="hotel-price-sub">per night</div>
          <div class="hotel-price-sub" style="color:var(--ink);font-weight:600;margin-top:4px;">Â£1,120 total</div>
        </div>
      </div>

      <div class="hotel-option" id="hotel-3" onclick="selectHotel('hotel-3')">
        <div class="hotel-img">ğŸ¦</div>
        <div class="hotel-info">
          <div class="hotel-name">Wall Street Inn</div>
          <div class="hotel-location">Financial District Â· Near NYSE Â· Business hub</div>
          <div class="hotel-stars">â˜…â˜…â˜…â˜…â˜† 4.0 Â· 2,110 reviews</div>
          <div style="font-size:10px;font-family:'DM Mono',monospace;color:var(--green);margin-top:3px;">âœ“ Conference rooms Â· Express check-in Â· Bar</div>
        </div>
        <div>
          <div class="hotel-price">Â£155</div>
          <div class="hotel-price-sub">per night</div>
          <div class="hotel-price-sub" style="color:var(--ink);font-weight:600;margin-top:4px;">Â£775 total</div>
        </div>
      </div>
    </div>

    <!-- Panel 4: AI Itinerary (with loading state) -->
    <div class="trip-panel" id="trip-panel-4">
      <div id="itin-loading" class="ai-thinking" style="display:none;">
        <div class="ai-dots">
          <div class="ai-dot"></div>
          <div class="ai-dot"></div>
          <div class="ai-dot"></div>
        </div>
        <div style="font-size:12px;font-family:'DM Mono',monospace;color:var(--ink3);">ANN is generating your personalised itinerary...</div>
      </div>

      <div id="itin-content">
        <div style="font-size:10px;font-family:'DM Mono',monospace;color:var(--ink3);letter-spacing:1px;margin-bottom:16px;">AI-GENERATED ITINERARY Â· NEW YORK CITY Â· 5 DAYS</div>

        <!-- Day 1 -->
        <div class="itin-day">
          <div class="itin-day-header">
            <div class="itin-day-num">1</div>
            <div><div class="itin-day-title">Arrival & Midtown</div><div class="itin-day-sub">Wed 10 Jun Â· JFK arrival ~12:00pm</div></div>
          </div>
          <div class="itin-item"><div class="itin-time">12:30</div><div class="itin-dot" style="background:#3b82f6;"></div><div class="itin-info"><div class="itin-name">JFK â†’ Manhattan Â· AirTrain + Subway</div><div class="itin-detail">45 min Â· $10.75 Â· E train to 5th Ave</div><span class="itin-tag itin-tag-transit">Transit</span></div></div>
          <div class="itin-item"><div class="itin-time">13:30</div><div class="itin-dot" style="background:#10b981;"></div><div class="itin-info"><div class="itin-name">Check-in Â· The Manhattan at Times Square</div><div class="itin-detail">Request early check-in Â· Store luggage if unavailable</div><span class="itin-tag itin-tag-hotel">Hotel</span></div></div>
          <div class="itin-item"><div class="itin-time">15:00</div><div class="itin-dot" style="background:#f59e0b;"></div><div class="itin-info"><div class="itin-name">Stumptown Coffee Roasters</div><div class="itin-detail">18 W 29th St Â· Specialty coffee Â· Matches your â˜• profile</div><span class="itin-tag itin-tag-food">Food</span></div></div>
          <div class="itin-item"><div class="itin-time">16:00</div><div class="itin-dot" style="background:#8b5cf6;"></div><div class="itin-info"><div class="itin-name">High Line Walking Tour</div><div class="itin-detail">Elevated park Â· 1.45 miles Â· Hudson Yards views Â· Free</div><span class="itin-tag itin-tag-culture">Culture</span></div></div>
          <div class="itin-item"><div class="itin-time">19:00</div><div class="itin-dot" style="background:#f59e0b;"></div><div class="itin-info"><div class="itin-name">Momofuku Noodle Bar</div><div class="itin-detail">171 1st Ave Â· Asian ramen Â· Matches your ğŸœ taste profile</div><span class="itin-tag itin-tag-food">Food</span></div></div>
        </div>

        <!-- Day 2 -->
        <div class="itin-day">
          <div class="itin-day-header">
            <div class="itin-day-num">2</div>
            <div><div class="itin-day-title">Finance District & Wall Street</div><div class="itin-day-sub">Thu 11 Jun Â· Matched to your ğŸ“ˆ finance interest</div></div>
          </div>
          <div class="itin-item"><div class="itin-time">08:30</div><div class="itin-dot" style="background:#f59e0b;"></div><div class="itin-info"><div class="itin-name">Gregory's Coffee Â· Breakfast</div><div class="itin-detail">Ground floor of 1 WTC Â· NYC speciality chain</div><span class="itin-tag itin-tag-food">Food</span></div></div>
          <div class="itin-item"><div class="itin-time">09:30</div><div class="itin-dot" style="background:#8b5cf6;"></div><div class="itin-info"><div class="itin-name">NYSE & Wall Street Walking Tour</div><div class="itin-detail">11 Wall St Â· See trading floor exterior Â· Charging Bull sculpture</div><span class="itin-tag itin-tag-culture">Culture</span></div></div>
          <div class="itin-item"><div class="itin-time">11:00</div><div class="itin-dot" style="background:#8b5cf6;"></div><div class="itin-info"><div class="itin-name">Museum of American Finance</div><div class="itin-detail">48 Wall St Â· Historic stock certificates, trading history Â· Â£15</div><span class="itin-tag itin-tag-culture">Culture</span></div></div>
          <div class="itin-item"><div class="itin-time">13:00</div><div class="itin-dot" style="background:#f59e0b;"></div><div class="itin-info"><div class="itin-name">Xi'an Famous Foods Â· Lunch</div><div class="itin-detail">FiDi location Â· Hand-pulled noodles Â· Matches ğŸœ profile</div><span class="itin-tag itin-tag-food">Food</span></div></div>
          <div class="itin-item"><div class="itin-time">15:00</div><div class="itin-dot" style="background:#8b5cf6;"></div><div class="itin-info"><div class="itin-name">One World Observatory</div><div class="itin-detail">1 World Trade Center Â· 100th floor Â· 360Â° views Â· Â£28</div><span class="itin-tag itin-tag-culture">Culture</span></div></div>
          <div class="itin-item"><div class="itin-time">19:30</div><div class="itin-dot" style="background:#f59e0b;"></div><div class="itin-info"><div class="itin-name">Nobu Downtown Â· Dinner</div><div class="itin-detail">195 Broadway Â· Japanese fusion Â· Reserve ahead</div><span class="itin-tag itin-tag-food">Food</span></div></div>
        </div>

        <!-- Day 3 -->
        <div class="itin-day">
          <div class="itin-day-header">
            <div class="itin-day-num">3</div>
            <div><div class="itin-day-title">Tech & Brooklyn</div><div class="itin-day-sub">Fri 12 Jun Â· Matched to your ğŸ’» tech interest</div></div>
          </div>
          <div class="itin-item"><div class="itin-time">09:00</div><div class="itin-dot" style="background:#f59e0b;"></div><div class="itin-info"><div class="itin-name">Blank Street Coffee Â· Williamsburg</div><div class="itin-detail">NYC-born specialty chain Â· Pour-over bar</div><span class="itin-tag itin-tag-food">Food</span></div></div>
          <div class="itin-item"><div class="itin-time">10:30</div><div class="itin-dot" style="background:#8b5cf6;"></div><div class="itin-info"><div class="itin-name">DUMBO & Brooklyn Bridge Walk</div><div class="itin-detail">Tech startup district Â· Manhattan skyline views Â· Free</div><span class="itin-tag itin-tag-culture">Culture</span></div></div>
          <div class="itin-item"><div class="itin-time">14:00</div><div class="itin-dot" style="background:#8b5cf6;"></div><div class="itin-info"><div class="itin-name">NYC Tech Hub Tour Â· Hudson Yards</div><div class="itin-detail">Google NYC campus exterior Â· Shed cultural centre</div><span class="itin-tag itin-tag-culture">Culture</span></div></div>
          <div class="itin-item"><div class="itin-time">18:00</div><div class="itin-dot" style="background:#3b82f6;"></div><div class="itin-info"><div class="itin-name">Equinox Gym Â· Day Pass</div><div class="itin-detail">31st St Â· Premium gym Â· Matches ğŸ‹ï¸ interest Â· $35</div><span class="itin-tag itin-tag-transit">Fitness</span></div></div>
          <div class="itin-item"><div class="itin-time">20:00</div><div class="itin-dot" style="background:#f59e0b;"></div><div class="itin-info"><div class="itin-name">Ugly Baby Â· Thai Â· Brooklyn</div><div class="itin-detail">407 Smith St Â· Authentic Thai street food</div><span class="itin-tag itin-tag-food">Food</span></div></div>
        </div>

        <div style="padding:10px 12px;background:var(--blue-light);border-radius:8px;font-size:10px;font-family:'DM Mono',monospace;color:#1a3260;line-height:1.6;">
          âœ¦ Days 4â€“5 (Satâ€“Sun) include Central Park, MoMA, Chelsea Market, and departure to JFK.<br>Full itinerary saved to calendar on confirmation.
        </div>
      </div>
    </div>

    <!-- Panel 5: Confirmation -->
    <div class="trip-panel" id="trip-panel-5">
      <div class="trip-summary-box">
        <div style="font-size:10px;font-family:'DM Mono',monospace;color:rgba(255,255,255,0.4);letter-spacing:1px;">TRIP SUMMARY Â· NEW YORK CITY</div>
        <div class="trip-summary-grid">
          <div class="trip-summary-item"><div class="trip-summary-label">Dates</div><div class="trip-summary-val">10â€“15 Jun</div></div>
          <div class="trip-summary-item"><div class="trip-summary-label">Duration</div><div class="trip-summary-val">5 nights</div></div>
          <div class="trip-summary-item"><div class="trip-summary-label">Flight</div><div class="trip-summary-val">BA 177/178</div></div>
          <div class="trip-summary-item"><div class="trip-summary-label">Hotel</div><div class="trip-summary-val">Manhattan TS</div></div>
        </div>
      </div>

      <div style="display:flex;flex-direction:column;gap:8px;margin-bottom:16px;">
        <div style="display:flex;justify-content:space-between;padding:10px 14px;background:var(--surface2);border-radius:8px;border:1px solid var(--border);font-size:13px;">
          <span style="font-weight:600;">âœˆ Outbound Â· BA 177</span>
          <span style="font-family:'DM Mono',monospace;font-weight:700;">Â£389</span>
        </div>
        <div style="display:flex;justify-content:space-between;padding:10px 14px;background:var(--surface2);border-radius:8px;border:1px solid var(--border);font-size:13px;">
          <span style="font-weight:600;">âœˆ Return Â· BA 178</span>
          <span style="font-family:'DM Mono',monospace;font-weight:700;">Â£349</span>
        </div>
        <div style="display:flex;justify-content:space-between;padding:10px 14px;background:var(--surface2);border-radius:8px;border:1px solid var(--border);font-size:13px;">
          <span style="font-weight:600;">ğŸ¨ Hotel Â· 5 nights</span>
          <span style="font-family:'DM Mono',monospace;font-weight:700;">Â£945</span>
        </div>
        <div style="display:flex;justify-content:space-between;padding:10px 14px;background:var(--surface2);border-radius:8px;border:1px solid var(--border);font-size:13px;">
          <span style="font-weight:600;">ğŸ—º Est. activities & food</span>
          <span style="font-family:'DM Mono',monospace;font-weight:700;">~Â£420</span>
        </div>
        <div style="display:flex;justify-content:space-between;padding:12px 14px;background:#1e3560;border-radius:8px;font-size:14px;color:white;">
          <span style="font-weight:700;">Total Estimated Cost</span>
          <span style="font-family:'DM Mono',monospace;font-weight:800;">Â£2,103</span>
        </div>
      </div>

      <div style="display:flex;flex-direction:column;gap:8px;">
        <label style="display:flex;align-items:center;gap:10px;font-size:12px;cursor:pointer;">
          <input type="checkbox" checked style="width:14px;height:14px;accent-color:#2c4a7c;">
          Add all 5 days to Calendar
        </label>
        <label style="display:flex;align-items:center;gap:10px;font-size:12px;cursor:pointer;">
          <input type="checkbox" checked style="width:14px;height:14px;accent-color:#2c4a7c;">
          Set budget alert at Â£2,200 total spend
        </label>
        <label style="display:flex;align-items:center;gap:10px;font-size:12px;cursor:pointer;">
          <input type="checkbox" style="width:14px;height:14px;accent-color:#2c4a7c;">
          Add restaurant reservations to tasks
        </label>
        <label style="display:flex;align-items:center;gap:10px;font-size:12px;cursor:pointer;">
          <input type="checkbox" checked style="width:14px;height:14px;accent-color:#2c4a7c;">
          Save itinerary to Trips
        </label>
      </div>
    </div>

    <!-- Footer -->
    <div class="trip-modal-footer">
      <button class="btn btn-ghost" id="trip-back-btn" onclick="tripStep(-1)" style="display:none;">â† Back</button>
      <div style="font-family:'DM Mono',monospace;font-size:10px;color:var(--ink3);" id="trip-step-counter">Step 1 of 5</div>
      <button class="btn btn-primary" id="trip-next-btn" onclick="tripStep(1)">Next â†’</button>
    </div>

  </div>
</div>

<!-- Receipt Modal -->
<div class="modal-overlay" id="receipt-modal" onclick="closeReceipt(event)">
  <div class="receipt-modal" onclick="event.stopPropagation()">
    <div class="receipt-modal-header">
      <div class="tx-logo tesco-logo" style="width:36px;height:36px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:12px;">T</div>
      <div>
        <div style="font-size:13px;font-weight:700;color:var(--ink);">Tesco Superstore</div>
        <div style="font-size:10px;font-family:'DM Mono',monospace;color:var(--ink3);">Receipt Â· 27 Feb 2026 Â· Â£47.83</div>
      </div>
      <button class="receipt-modal-close" onclick="closeReceiptBtn()">âœ•</button>
    </div>
    <div class="receipt-body">
      <div class="receipt-paper">
        <div class="receipt-paper-header">
          <div class="receipt-store-name">TESCO</div>
          <div class="receipt-store-sub">Tritton Road, Lincoln, LN6 7QY</div>
          <div class="receipt-store-sub" style="margin-top:6px;">27/02/2026 &nbsp;14:23 &nbsp;Till: 04 &nbsp;Op: 182</div>
        </div>

        <div class="receipt-line"><span class="receipt-line-name">Whole Milk 2L</span><span class="receipt-line-qty">x1</span><span class="receipt-line-price">Â£1.35</span></div>
        <div class="receipt-line"><span class="receipt-line-name">Medium Sliced Bread</span><span class="receipt-line-qty">x1</span><span class="receipt-line-price">Â£1.20</span></div>
        <div class="receipt-line"><span class="receipt-line-name">Free Range Eggs 12pk</span><span class="receipt-line-qty">x1</span><span class="receipt-line-price">Â£2.85</span></div>
        <div class="receipt-line"><span class="receipt-line-name">Tesco Coffee Beans 500g</span><span class="receipt-line-qty">x1</span><span class="receipt-line-price">Â£5.50</span></div>
        <div class="receipt-line"><span class="receipt-line-name">Basmati Rice 1kg</span><span class="receipt-line-qty">x1</span><span class="receipt-line-price">Â£2.10</span></div>
        <div class="receipt-line"><span class="receipt-line-name">Extra Virgin Olive Oil 500ml</span><span class="receipt-line-qty">x1</span><span class="receipt-line-price">Â£4.20</span></div>
        <div class="receipt-line"><span class="receipt-line-name">Garlic Bulb</span><span class="receipt-line-qty">x2</span><span class="receipt-line-price">Â£0.80</span></div>
        <div class="receipt-line"><span class="receipt-line-name">Chicken Breast 500g</span><span class="receipt-line-qty">x2</span><span class="receipt-line-price">Â£7.00</span></div>
        <div class="receipt-line"><span class="receipt-line-name">Broccoli</span><span class="receipt-line-qty">x1</span><span class="receipt-line-price">Â£0.79</span></div>
        <div class="receipt-line"><span class="receipt-line-name">Cheddar Cheese 400g</span><span class="receipt-line-qty">x1</span><span class="receipt-line-price">Â£3.50</span></div>
        <div class="receipt-line"><span class="receipt-line-name">Pasta Penne 500g</span><span class="receipt-line-qty">x2</span><span class="receipt-line-price">Â£1.80</span></div>
        <div class="receipt-line"><span class="receipt-line-name">Tinned Tomatoes 400g</span><span class="receipt-line-qty">x3</span><span class="receipt-line-price">Â£1.50</span></div>
        <div class="receipt-line"><span class="receipt-line-name">Orange Juice 1.5L</span><span class="receipt-line-qty">x1</span><span class="receipt-line-price">Â£2.00</span></div>
        <div class="receipt-line"><span class="receipt-line-name">Washing Up Liquid 500ml</span><span class="receipt-line-qty">x1</span><span class="receipt-line-price">Â£1.50</span></div>
        <div class="receipt-line"><span class="receipt-line-name">Tesco Bag for Life</span><span class="receipt-line-qty">x2</span><span class="receipt-line-price">Â£0.30</span></div>

        <hr class="receipt-divider"/>

        <div class="receipt-total-row"><span>Subtotal</span><span>Â£36.39</span></div>
        <div class="receipt-total-row"><span>Clubcard Savings</span><span style="color:#00539f;">âˆ’Â£2.56</span></div>
        <div class="receipt-total-row"><span>VAT (5%)</span><span>Â£0.68</span></div>
        <div class="receipt-total-row"><span>VAT (20%)</span><span>Â£2.32</span></div>
        <div class="receipt-total-row grand"><span>TOTAL</span><span>Â£47.83</span></div>

        <hr class="receipt-divider"/>

        <div class="receipt-total-row"><span>Contactless Payment</span><span>Â£47.83</span></div>
        <div class="receipt-total-row"><span>Change</span><span>Â£0.00</span></div>

        <div class="receipt-footer">
          Thank you for shopping at Tesco<br>
          Clubcard Points Earned: 47<br>
          Total Clubcard Points: 1,284<br><br>
          Receipt No: 0427-2802-1423-8291
          <div class="receipt-barcode-img"></div>
        </div>
      </div>

      <div style="margin-top:12px; padding:10px 12px; background:var(--green-light); border:1px solid rgba(21,128,61,0.15); border-radius:8px; font-size:10px; font-family:'DM Mono',monospace; color:var(--green);">
        âœ“ Receipt matched to Barclays transaction Â· Inventory updated with 15 items Â· Linked 27 Feb 14:23
      </div>
    </div>
  </div>
</div>

<script>
function updateClock() {
  const now = new Date();
  document.getElementById('clock').textContent =
    now.toLocaleTimeString('en-GB', { hour: '2-digit', minute: '2-digit' });
}
updateClock();
setInterval(updateClock, 1000);

const views = {
  dashboard: { title: 'Dashboard', sub: 'Saturday, 28 February 2026', btn: '+ Add Task' },
  tasks: { title: 'Tasks', sub: 'All tasks from emails, calls & manual', btn: '+ Add Task' },
  emails: { title: 'Emails', sub: 'AI summarised Â· All providers via Nylas', btn: 'Refresh' },
  calls: { title: 'Call Log', sub: 'Whisper transcription Â· Claude summary', btn: 'Record Call' },
  wallet: { title: 'Wallet', sub: 'Tickets & passes from emails', btn: 'Add Pass' },
  budget: { title: 'Budget', sub: 'February 2026 Â· TrueLayer connected', btn: 'Sync Bank' },
  bills: { title: 'Bills & Subscriptions', sub: 'Auto-detected recurring transactions', btn: 'Add Manual' },
  categorisation: { title: 'Categorisation', sub: 'Auto-categorised from bank transactions Â· TrueLayer', btn: 'Re-categorise' },
  vat: { title: 'VAT Return', sub: 'Quarter 4 Â· Octâ€“Dec 2025 Â· Due 7 Feb 2026', btn: 'Submit to HMRC' },
  tax: { title: 'Self Assessment Tax Return', sub: 'Tax Year 2024/25 Â· Due 31 Jan 2026', btn: 'Submit to HMRC' },
  inventory: { title: 'Inventory', sub: 'Food & drink Â· Updated from receipts', btn: 'Scan Receipt' },
  meals: { title: 'Meal Planner', sub: 'AI generated Â· Based on inventory & taste profile', btn: 'Regenerate' },
  trips: { title: 'Trip Planning', sub: 'Suggestions based on your interests', btn: 'Plan New Trip' },
  parcels: { title: 'Parcels', sub: 'Auto-tracked from emails Â· AfterShip', btn: 'Add Tracking' },
  calendar: { title: 'Calendar', sub: 'Events from emails & calls', btn: '+ Add Event' },
};

function navigate(view, el) {
  document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
  document.getElementById('view-' + view).classList.add('active');
  el.classList.add('active');
  const v = views[view];
  document.getElementById('topbar-title').textContent = v.title;
  document.getElementById('topbar-sub').textContent = v.sub;
  document.getElementById('action-btn').textContent = v.btn;
  document.getElementById('notif-panel').classList.remove('open');
}

function handleAction() {
  const btn = document.getElementById('action-btn').textContent;
  const msgs = {
    '+ Add Task': 'âœ“ Task input focused',
    'Refresh': 'âœ‰ Fetching latest emails via Nylas...',
    'Record Call': 'â˜ Starting VOIP call recording...',
    'Add Pass': 'â—ˆ Scan or upload a pass',
    'Sync Bank': 'ğŸ¦ Syncing transactions via TrueLayer...',
    'Add Manual': 'âš‘ Add a manual bill',
    'Scan Receipt': 'ğŸ“„ Upload receipt image to scan',
    'Regenerate': 'ğŸ¤– Claude regenerating meal plan...',
    'Plan New Trip': 'âœˆ Starting trip planner...',
    'Add Tracking': 'ğŸ“¦ Enter tracking number',
    '+ Add Event': 'â—« Create a new calendar event',
  };
  if (btn === '+ Add Task') {
    navigate('tasks', document.querySelectorAll('.nav-item')[2]);
    setTimeout(() => document.getElementById('new-task-input').focus(), 100);
    return;
  }
  showToast(msgs[btn] || 'âœ“ Done');
}

function toggleTask(el) {
  const check = el.querySelector('.task-check');
  const text = el.querySelector('.task-text');
  if (check.classList.contains('done')) {
    check.classList.remove('done'); check.textContent = ''; text.classList.remove('done');
  } else {
    check.classList.add('done'); check.textContent = 'âœ“'; text.classList.add('done');
    showToast('âœ“ Task completed');
  }
}

function addNewTask() {
  const input = document.getElementById('new-task-input');
  const val = input.value.trim();
  if (!val) return;
  const list = document.getElementById('all-tasks-list');
  const item = document.createElement('div');
  item.className = 'task-item';
  item.onclick = function() { toggleTask(this); };
  item.innerHTML = `<div class="task-check"></div><div class="task-text">${val}</div><div class="task-source">manual</div>`;
  list.appendChild(item);
  input.value = '';
  showToast('âœ“ Task added');
}

function toggleTag(el) {
  if (el.classList.contains('tag-active')) {
    el.classList.remove('tag-active'); el.classList.add('tag-inactive');
  } else if (el.classList.contains('tag-inactive')) {
    el.classList.remove('tag-inactive'); el.classList.add('tag-active');
  }
  showToast('âœ¦ Profile updated');
}

function addTag() {
  const name = prompt('Add an interest or hobby:');
  if (!name) return;
  const tags = document.getElementById('profile-tags');
  const addBtn = tags.querySelector('.tag-add');
  const tag = document.createElement('span');
  tag.className = 'profile-tag tag-active';
  tag.textContent = name;
  tag.onclick = function() { toggleTag(this); };
  tags.insertBefore(tag, addBtn);
  showToast('âœ¦ Interest added to profile');
}

function toggleNotif() {
  document.getElementById('notif-panel').classList.toggle('open');
}

function clearNotifs() {
  document.getElementById('notif-panel').querySelector('.notif-list').innerHTML =
    '<div style="padding:24px;text-align:center;font-family:\'DM Mono\',monospace;font-size:11px;color:var(--ink3);">No new notifications</div>';
  document.querySelector('.notif-dot').style.display = 'none';
  showToast('ğŸ”” All notifications cleared');
}

let toastTimer;
function showToast(msg) {
  const toast = document.getElementById('toast');
  toast.textContent = msg;
  toast.classList.add('show');
  clearTimeout(toastTimer);
  toastTimer = setTimeout(() => toast.classList.remove('show'), 2800);
}

document.addEventListener('click', e => {
  const panel = document.getElementById('notif-panel');
  const bell = document.querySelector('.notif-bell');
  if (!panel.contains(e.target) && !bell.contains(e.target)) {
    panel.classList.remove('open');
  }
});

// Receipt modal
function openReceipt() {
  document.getElementById('receipt-modal').classList.add('open');
}

function closeReceipt(e) {
  if (e.target === document.getElementById('receipt-modal')) {
    document.getElementById('receipt-modal').classList.remove('open');
  }
}

function closeReceiptBtn() {
  document.getElementById('receipt-modal').classList.remove('open');
}

// â”€â”€ TRIP PLANNER â”€â”€
let currentTripStep = 1;
const totalTripSteps = 5;
const stepLabels = ['Dates', 'Flights', 'Hotel', 'Itinerary', 'Confirm'];

function openTripPlanner() {
  currentTripStep = 1;
  renderTripStep(1);
  document.getElementById('trip-modal-overlay').classList.add('open');
}

function closeTripPlanner() {
  document.getElementById('trip-modal-overlay').classList.remove('open');
}

function closeTripPlannerOverlay(e) {
  if (e.target === document.getElementById('trip-modal-overlay')) closeTripPlanner();
}

function tripStep(dir) {
  const next = currentTripStep + dir;
  if (next < 1 || next > totalTripSteps) return;

  // On step 3â†’4 show AI loading animation
  if (currentTripStep === 3 && dir === 1) {
    currentTripStep = 4;
    renderTripStep(4, true); // true = show loading
    return;
  }

  currentTripStep = next;
  renderTripStep(currentTripStep);
}

function renderTripStep(step, showLoading) {
  // Hide all panels
  for (let i = 1; i <= totalTripSteps; i++) {
    document.getElementById('trip-panel-' + i).classList.remove('active');
    const dot = document.getElementById('step-dot-' + i);
    const lbl = document.getElementById('step-label-' + i);
    if (i < step) {
      dot.className = 'trip-step-dot done'; dot.textContent = 'âœ“';
      lbl.className = 'trip-step-label done';
    } else if (i === step) {
      dot.className = 'trip-step-dot active'; dot.textContent = i;
      lbl.className = 'trip-step-label active';
    } else {
      dot.className = 'trip-step-dot'; dot.textContent = i;
      lbl.className = 'trip-step-label';
    }
    if (i < totalTripSteps) {
      const line = document.getElementById('step-line-' + i);
      line.className = 'trip-step-line' + (i < step ? ' done' : '');
    }
  }

  // Show current panel
  document.getElementById('trip-panel-' + step).classList.add('active');

  // Back/Next buttons
  const backBtn = document.getElementById('trip-back-btn');
  const nextBtn = document.getElementById('trip-next-btn');
  backBtn.style.display = step > 1 ? 'inline-flex' : 'none';

  if (step === totalTripSteps) {
    nextBtn.textContent = 'âœ“ Confirm & Save Trip';
    nextBtn.onclick = confirmTrip;
  } else {
    nextBtn.textContent = 'Next â†’';
    nextBtn.onclick = () => tripStep(1);
  }

  document.getElementById('trip-step-counter').textContent = 'Step ' + step + ' of ' + totalTripSteps;

  // Itinerary loading animation
  if (step === 4) {
    if (showLoading) {
      document.getElementById('itin-loading').style.display = 'flex';
      document.getElementById('itin-content').style.display = 'none';
      document.getElementById('trip-next-btn').disabled = true;
      setTimeout(() => {
        document.getElementById('itin-loading').style.display = 'none';
        document.getElementById('itin-content').style.display = 'block';
        document.getElementById('trip-next-btn').disabled = false;
        showToast('âœ¦ Itinerary generated â€” 5 days, 20 activities');
      }, 2200);
    } else {
      document.getElementById('itin-loading').style.display = 'none';
      document.getElementById('itin-content').style.display = 'block';
    }
  }
}

function selectFlight(id) {
  // Only deselect flights in same direction
  const isReturn = id.startsWith('flight-r');
  document.querySelectorAll('.flight-option').forEach(f => {
    const fIsReturn = f.id.startsWith('flight-r');
    if (fIsReturn === isReturn) f.classList.remove('selected');
  });
  document.getElementById(id).classList.add('selected');
}

function selectHotel(id) {
  document.querySelectorAll('.hotel-option').forEach(h => h.classList.remove('selected'));
  document.getElementById(id).classList.add('selected');
}

function toggleChip(el) {
  el.classList.toggle('selected');
}

function confirmTrip() {
  closeTripPlanner();
  showToast('âœˆ New York trip saved Â· Calendar & tasks updated');
}

const mobileBottomMap = {
  dashboard: 'mnav-dashboard',
  emails: 'mnav-emails',
  budget: 'mnav-budget',
  tasks: 'mnav-tasks',
};

function navigateMobile(view, el) {
  // Navigate using desktop nav logic
  const fakeDesktopEl = document.querySelector(`[onclick="navigate('${view}', this)"]`);
  if (fakeDesktopEl) {
    navigate(view, fakeDesktopEl);
  } else {
    // Manually update view for drawer items
    document.querySelectorAll('.content').forEach(c => c.classList.remove('active'));
    document.getElementById('view-' + view).classList.add('active');
    const v = views[view];
    if (v) {
      document.getElementById('topbar-title').textContent = v.title;
      document.getElementById('action-btn').textContent = v.btn;
    }
  }
  // Highlight drawer item
  document.querySelectorAll('.mobile-drawer .nav-item').forEach(n => n.classList.remove('active'));
  el.classList.add('active');
  // Sync bottom nav if applicable
  Object.keys(mobileBottomMap).forEach(k => {
    document.getElementById(mobileBottomMap[k])?.classList.remove('active');
  });
  if (mobileBottomMap[view]) {
    document.getElementById(mobileBottomMap[view])?.classList.add('active');
  }
  closeDrawer();
}

function navigateMobileBottom(view, el) {
  // Navigate
  const desktopEl = document.querySelector(`[onclick="navigate('${view}', this)"]`);
  if (desktopEl) navigate(view, desktopEl);
  // Highlight bottom nav
  document.querySelectorAll('.mobile-nav-btn').forEach(b => b.classList.remove('active'));
  el.classList.add('active');
}

function toggleDrawer() {
  const drawer = document.getElementById('mobile-drawer');
  const overlay = document.getElementById('drawer-overlay');
  drawer.classList.toggle('open');
  overlay.classList.toggle('open');
}

function closeDrawer() {
  document.getElementById('mobile-drawer').classList.remove('open');
  document.getElementById('drawer-overlay').classList.remove('open');
}

// Show/hide mobile menu btn based on viewport
function checkViewport() {
  const btn = document.getElementById('mobile-menu-btn');
  if (window.innerWidth <= 768) {
    btn.style.display = 'flex';
  } else {
    btn.style.display = 'none';
    closeDrawer();
  }
}
checkViewport();
window.addEventListener('resize', checkViewport);
</script>

</body>
</html>
